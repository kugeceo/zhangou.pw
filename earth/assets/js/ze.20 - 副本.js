if(window.location!==window.top.location||window.location.hostname!=='zoom.earth'&&window.location.hostname!=='neave.local'){top.location.href='https://zoom.earth/';}
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-56095-2','auto');ga('require','displayfeatures');ga('send','pageview');(function(){var q,v=this;function aa(b){var c=typeof b;if("object"==c)if(b){if(b instanceof Array)return"array";if(b instanceof Object)return c;var d=Object.prototype.toString.call(b);if("[object Window]"==d)return"object";if("[object Array]"==d||"number"==typeof b.length&&"undefined"!=typeof b.splice&&"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("splice"))return"array";if("[object Function]"==d||"undefined"!=typeof b.call&&"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==c&&"undefined"==typeof b.call)return"object";return c}function ba(b){var c=aa(b);return"array"==c||"object"==c&&"number"==typeof b.length}function ca(b){return"number"==typeof b}function da(b){var c=typeof b;return"object"==c&&null!=b||"function"==c}function y(b){return b[ea]||(b[ea]=++fa)}var ea="closure_uid_"+(1E9*Math.random()>>>0),fa=0;function ga(b,c,d){return b.call.apply(b.bind,arguments)}
function ha(b,c,d){if(!b)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(d,e);return b.apply(c,d)}}return function(){return b.apply(c,arguments)}}function ia(b,c,d){ia=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ga:ha;return ia.apply(null,arguments)}
function I(b,c){var d=b.split("."),e=v;d[0]in e||!e.execScript||e.execScript("var "+d[0]);for(var f;d.length&&(f=d.shift());)d.length||void 0===c?e[f]?e=e[f]:e=e[f]={}:e[f]=c}function J(b,c){function d(){}d.prototype=c.prototype;b.L=c.prototype;b.prototype=new d;b.prototype.constructor=b;b.Gc=function(b,d,g){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return c.prototype[d].apply(b,h)}};function ja(){}var K=Function("return this")();var ka;var la=String.prototype.trim?function(b){return b.trim()}:function(b){return b.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function ma(b){if(!na.test(b))return b;-1!=b.indexOf("&")&&(b=b.replace(oa,"&amp;"));-1!=b.indexOf("<")&&(b=b.replace(pa,"&lt;"));-1!=b.indexOf(">")&&(b=b.replace(qa,"&gt;"));-1!=b.indexOf('"')&&(b=b.replace(ra,"&quot;"));-1!=b.indexOf("'")&&(b=b.replace(sa,"&#39;"));-1!=b.indexOf("\x00")&&(b=b.replace(ta,"&#0;"));return b}var oa=/&/g,pa=/</g,qa=/>/g,ra=/"/g,sa=/'/g,ta=/\x00/g,na=/[\x00&<>"']/;function ua(b,c){return b<c?-1:b>c?1:0};function wa(b,c,d){return Math.min(Math.max(b,c),d)}var xa=function(){var b;"cosh"in Math?b=Math.cosh:b=function(b){b=Math.exp(b);return(b+1/b)/2};return b}();function ya(b,c){var d=b%c;return 0>d*c?d+c:d};function za(b){return function(c){if(c)return[wa(c[0],b[0],b[2]),wa(c[1],b[1],b[3])]}}function Aa(b){return b};function Ba(b,c,d){this.center=b;this.resolution=c;this.rotation=d};var Ea="function"===typeof Object.assign?Object.assign:function(b,c){if(void 0===b||null===b)throw new TypeError("Cannot convert undefined or null to object");for(var d=Object(b),e=1,f=arguments.length;e<f;++e){var g=arguments[e];if(void 0!==g&&null!==g)for(var h in g)g.hasOwnProperty(h)&&(d[h]=g[h])}return d};function Fa(b){for(var c in b)delete b[c]}function Ga(b){for(var c in b)return!1;return!c};var Ha="olm_"+(1E4*Math.random()|0);function Ia(b){function c(c){var e=b.listener,f=b.Ea||b.target;b.Ga&&N(b);return e.call(f,c)}return b.Fa=c}function Ja(b,c,d,e){for(var f,g=0,h=b.length;g<h;++g)if(f=b[g],f.listener===c&&f.Ea===d)return e&&(f.deleteIndex=g),f}function Ka(b,c){var d=b[Ha];return d?d[c]:void 0}function La(b){var c=b[Ha];c||(c=b[Ha]={});return c}
function Ma(b,c){var d=Ka(b,c);if(d){for(var e=0,f=d.length;e<f;++e)b.removeEventListener(c,d[e].Fa),Fa(d[e]);d.length=0;if(d=b[Ha])delete d[c],0===Object.keys(d).length&&delete b[Ha]}}function P(b,c,d,e,f){var g=La(b),h=g[c];h||(h=g[c]=[]);(g=Ja(h,d,e,!1))?f||(g.Ga=!1):(g={Ea:e,Ga:!!f,listener:d,target:b,type:c},b.addEventListener(c,Ia(g)),h.push(g));return g}function Na(b,c,d,e){(b=Ka(b,c))&&(d=Ja(b,d,e,!0))&&N(d)}
function N(b){if(b&&b.target){b.target.removeEventListener(b.type,b.Fa);var c=Ka(b.target,b.type);if(c){var d="deleteIndex"in b?b.deleteIndex:c.indexOf(b);-1!==d&&c.splice(d,1);0===c.length&&Ma(b.target,b.type)}Fa(b)}};function Oa(){}Oa.prototype.wa=!1;function Pa(b){b.wa||(b.wa=!0,b.C())}Oa.prototype.C=ja;function Q(b,c){this.type=b;this.target=c||null}Q.prototype.preventDefault=Q.prototype.stopPropagation=function(){this.kc=!0};function Qa(b){b.stopPropagation()}function Ra(b){b.preventDefault()};function Sa(){this.H={};this.u={};this.j={}}J(Sa,Oa);Sa.prototype.addEventListener=function(b,c){var d=this.j[b];d||(d=this.j[b]=[]);-1===d.indexOf(c)&&d.push(c)};function R(b,c){var d="string"===typeof c?new Q(c):c,e=d.type;d.target=b;var f=b.j[e],g;if(f){e in b.u||(b.u[e]=0,b.H[e]=0);++b.u[e];for(var h=0,k=f.length;h<k;++h)if(!1===f[h].call(b,d)||d.kc){g=!1;break}--b.u[e];if(0===b.u[e]){d=b.H[e];for(delete b.H[e];d--;)b.removeEventListener(e,ja);delete b.u[e]}return g}}
Sa.prototype.C=function(){var b=La(this),c;for(c in b)Ma(this,c)};function Ta(b,c){return c?c in b.j:0<Object.keys(b.j).length}Sa.prototype.removeEventListener=function(b,c){var d=this.j[b];if(d){var e=d.indexOf(c);b in this.H?(d[e]=ja,++this.H[b]):(d.splice(e,1),0===d.length&&delete this.j[b])}};function Ua(){Sa.call(this);this.v=0}J(Ua,Sa);Ua.prototype.f=function(){++this.v;R(this,"change")};Ua.prototype.bb=function(b,c,d){if(Array.isArray(b)){for(var e=b.length,f=Array(e),g=0;g<e;++g)f[g]=P(this,b[g],c,d);return f}return P(this,b,c,d)};function Va(b,c,d){Q.call(this,b);this.key=c;this.oldValue=d}J(Va,Q);function S(b){Ua.call(this);y(this);this.I={};void 0!==b&&Wa(this,b)}J(S,Ua);var Xa={};function Ya(b){return Xa.hasOwnProperty(b)?Xa[b]:Xa[b]="change:"+b}S.prototype.get=function(b){var c;this.I.hasOwnProperty(b)&&(c=this.I[b]);return c};S.prototype.set=function(b,c,d){d?this.I[b]=c:(d=this.I[b],this.I[b]=c,d!==c&&(c=Ya(b),R(this,new Va(c,b,d)),R(this,new Va("propertychange",b,d))))};function Wa(b,c){for(var d in c)b.set(d,c[d],void 0)};function Za(b,c){return b>c?1:b<c?-1:0}function $a(b,c,d){var e=b.length;if(b[0]<=c)return 0;if(!(c<=b[e-1]))if(0<d)for(d=1;d<e;++d){if(b[d]<c)return d-1}else if(0>d)for(d=1;d<e;++d){if(b[d]<=c)return d}else for(d=1;d<e;++d){if(b[d]==c)return d;if(b[d]<c)return b[d-1]-c<c-b[d]?d-1:d}return e-1}function ab(b,c){var d=b.indexOf(c),e=-1<d;e&&b.splice(d,1);return e}
function bb(b){var c=cb,d=b.length,e=Array(b.length),f;for(f=0;f<d;f++)e[f]={index:f,value:b[f]};e.sort(function(b,d){return c(b.value,d.value)||b.index-d.index});for(f=0;f<b.length;f++)b[f]=e[f].value};function db(b){return function(c,d,e){if(void 0!==c)return c=$a(b,c,e),c=wa(c+d,0,b.length-1),b[c]}}function eb(b,c,d){return function(e,f,g){if(void 0!==e)return e=Math.max(Math.floor(Math.log(c/e)/Math.log(b)+(0<g?0:0>g?1:.5))+f,0),void 0!==d&&(e=Math.min(e,d)),c/Math.pow(b,e)}};function fb(b){if(void 0!==b)return 0}function gb(b,c){if(void 0!==b)return b+c}function hb(b){var c=2*Math.PI/b;return function(b,e){if(void 0!==b)return b=Math.floor((b+e)/c+.5)*c}}function ib(){var b=5*Math.PI/180;return function(c,d){if(void 0!==c)return Math.abs(c+d)<=b?0:c+d}};function jb(b,c){b[0]+=c[0];b[1]+=c[1]}function kb(b,c){var d=Math.cos(c),e=Math.sin(c),f=b[1]*d+b[0]*e;b[0]=b[0]*d-b[1]*e;b[1]=f};function lb(b){for(var c=mb(),d=0,e=b.length;d<e;++d)nb(c,b[d]);return c}function mb(){return[Infinity,Infinity,-Infinity,-Infinity]}function ob(b,c,d,e,f){return f?(f[0]=b,f[1]=c,f[2]=d,f[3]=e,f):[b,c,d,e]}function nb(b,c){c[0]<b[0]&&(b[0]=c[0]);c[0]>b[2]&&(b[2]=c[0]);c[1]<b[1]&&(b[1]=c[1]);c[1]>b[3]&&(b[3]=c[1])}function pb(b){var c=0;b[2]<b[0]||b[3]<b[1]||(c=U(b)*qb(b));return c}function rb(b){return[b[0],b[1]]}
function sb(b,c,d,e,f){var g=c*e[0]/2;e=c*e[1]/2;c=Math.cos(d);var h=Math.sin(d);d=g*c;g*=h;c*=e;var k=e*h,l=b[0],m=b[1];b=l-d+k;e=l-d-k;h=l+d-k;d=l+d+k;var k=m-g-c,l=m-g+c,n=m+g+c,g=m+g-c;return ob(Math.min(b,e,h,d),Math.min(k,l,n,g),Math.max(b,e,h,d),Math.max(k,l,n,g),f)}function qb(b){return b[3]-b[1]}function tb(b,c){var d=mb();ub(b,c)&&(d[0]=b[0]>c[0]?b[0]:c[0],d[1]=b[1]>c[1]?b[1]:c[1],d[2]=b[2]<c[2]?b[2]:c[2],d[3]=b[3]<c[3]?b[3]:c[3]);return d}function vb(b){return[b[0],b[3]]}
function U(b){return b[2]-b[0]}function ub(b,c){return b[0]<=c[2]&&b[2]>=c[0]&&b[1]<=c[3]&&b[3]>=c[1]}function wb(b,c){var d=[b[0],b[1],b[0],b[3],b[2],b[1],b[2],b[3]];c(d,d,2);var e=[d[0],d[2],d[4],d[6]],f=[d[1],d[3],d[5],d[7]],d=Math.min.apply(null,e),g=Math.min.apply(null,f),e=Math.max.apply(null,e),f=Math.max.apply(null,f);return ob(d,g,e,f,void 0)};function xb(){return!0}function yb(){return!1};function zb(b){this.radius=b}function Ab(b,c){var d=b[1]*Math.PI/180,e=c[1]*Math.PI/180,f=(e-d)/2,g=(c[0]-b[0])*Math.PI/180/2,d=Math.sin(f)*Math.sin(f)+Math.sin(g)*Math.sin(g)*Math.cos(d)*Math.cos(e);return 2*Bb.radius*Math.atan2(Math.sqrt(d),Math.sqrt(1-d))}
zb.prototype.offset=function(b,c,d){var e=b[1]*Math.PI/180;c/=this.radius;var f=Math.asin(Math.sin(e)*Math.cos(c)+Math.cos(e)*Math.sin(c)*Math.cos(d));return[180*(b[0]*Math.PI/180+Math.atan2(Math.sin(d)*Math.sin(c)*Math.cos(e),Math.cos(c)-Math.sin(e)*Math.sin(f)))/Math.PI,180*f/Math.PI]};var Bb=new zb(6370997);var Cb={};Cb.degrees=2*Math.PI*Bb.radius/360;Cb.ft=.3048;Cb.m=1;Cb["us-ft"]=1200/3937;function Db(b){this.f=b.code;this.c=b.units;this.u=void 0!==b.extent?b.extent:null;this.b=void 0!==b.global?b.global:!1;this.j=!(!this.b||!this.u);this.h=void 0!==b.getPointResolution?b.getPointResolution:this.H;this.g=null;this.v=b.metersPerUnit}Db.prototype.a=function(){return this.u};function Eb(b){return b.v||Cb[b.c]}
Db.prototype.H=function(b,c){if("degrees"==this.c)return b;var d=Fb(this,Gb("EPSG:4326")),e=[c[0]-b/2,c[1],c[0]+b/2,c[1],c[0],c[1]-b/2,c[0],c[1]+b/2],e=d(e,e,2),d=(Ab(e.slice(0,2),e.slice(2,4))+Ab(e.slice(4,6),e.slice(6,8)))/2,e=Eb(this);void 0!==e&&(d/=e);return d};Db.prototype.getPointResolution=function(b,c){return this.h(b,c)};var Hb={},Ib={};function Jb(b){Kb(b);b.forEach(function(c){b.forEach(function(b){c!==b&&Lb(c,b,Mb)})})}function Nb(b){Hb[b.f]=b;Lb(b,b,Mb)}
function Kb(b){var c=[];b.forEach(function(b){c.push(Nb(b))})}function Ob(b){return b?"string"===typeof b?Gb(b):b:Gb("EPSG:3857")}function Lb(b,c,d){b=b.f;c=c.f;b in Ib||(Ib[b]={});Ib[b][c]=d}function Gb(b){var c;b instanceof Db?c=b:"string"===typeof b?c=Hb[b]:c=null;return c}function Pb(b,c){if(b===c)return!0;var d=b.c===c.c;return b.f===c.f?d:Fb(b,c)===Mb&&d}function Qb(b,c){var d=Gb(b),e=Gb(c);return Fb(d,e)}
function Fb(b,c){var d=b.f,e=c.f,f;d in Ib&&e in Ib[d]&&(f=Ib[d][e]);void 0===f&&(f=Rb);return f}function Rb(b,c){if(void 0!==c&&b!==c){for(var d=0,e=b.length;d<e;++d)c[d]=b[d];b=c}return b}function Mb(b,c){var d;if(void 0!==c){d=0;for(var e=b.length;d<e;++d)c[d]=b[d];d=c}else d=b.slice();return d}function Sb(b,c,d){return Qb(c,d)(b,void 0,b.length)};function Tb(){S.call(this);this.i=mb();this.o=-1}J(Tb,S);Tb.prototype.a=function(b){if(this.o!=this.v){for(var c=this.b,d=this.b.length,e=this.c,f=ob(Infinity,Infinity,-Infinity,-Infinity,this.i),g=0;g<d;g+=e){var h=f,k=c[g],l=c[g+1];h[0]=Math.min(h[0],k);h[1]=Math.min(h[1],l);h[2]=Math.max(h[2],k);h[3]=Math.max(h[3],l)}this.i=f;this.o=this.v}c=this.i;b?(b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3]):b=c;return b};function Ub(b){this.length=b.length||b;for(var c=0;c<this.length;c++)this[c]=b[c]||0}Ub.prototype.BYTES_PER_ELEMENT=4;Ub.prototype.set=function(b,c){c=c||0;for(var d=0;d<b.length&&c+d<this.length;d++)this[c+d]=b[d]};Ub.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(Ub.BYTES_PER_ELEMENT=4,Ub.prototype.BYTES_PER_ELEMENT=Ub.prototype.BYTES_PER_ELEMENT,Ub.prototype.set=Ub.prototype.set,Ub.prototype.toString=Ub.prototype.toString,I("Float32Array",Ub));function Vb(b){this.length=b.length||b;for(var c=0;c<this.length;c++)this[c]=b[c]||0}Vb.prototype.BYTES_PER_ELEMENT=8;Vb.prototype.set=function(b,c){c=c||0;for(var d=0;d<b.length&&c+d<this.length;d++)this[c+d]=b[d]};Vb.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{Vb.BYTES_PER_ELEMENT=8}catch(b){}Vb.prototype.BYTES_PER_ELEMENT=Vb.prototype.BYTES_PER_ELEMENT;Vb.prototype.set=Vb.prototype.set;Vb.prototype.toString=Vb.prototype.toString;I("Float64Array",Vb)};function Wb(){var b=Array(16);Xb(b,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return b}function Xb(b,c,d,e,f,g,h,k,l,m,n,p,r,w,u,t,A){b[0]=c;b[1]=d;b[2]=e;b[3]=f;b[4]=g;b[5]=h;b[6]=k;b[7]=l;b[8]=m;b[9]=n;b[10]=p;b[11]=r;b[12]=w;b[13]=u;b[14]=t;b[15]=A}function Yb(b,c,d){var e=b[1]*c+b[5]*d+0*b[9]+b[13],f=b[2]*c+b[6]*d+0*b[10]+b[14],g=b[3]*c+b[7]*d+0*b[11]+b[15];b[12]=b[0]*c+b[4]*d+0*b[8]+b[12];b[13]=e;b[14]=f;b[15]=g}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);function Zb(){Tb.call(this);this.g="XY";this.c=2;this.b=null}J(Zb,Tb);function $b(b){if("XY"==b)return 2;if("XYZ"==b||"XYM"==b)return 3;if("XYZM"==b)return 4}Zb.prototype.rotate=function(b,c){var d=this.b;if(d){for(var e=d.length,f=this.c,g=d?d:[],h=Math.cos(b),k=Math.sin(b),l=c[0],m=c[1],n=0,p=0;p<e;p+=f){var r=d[p]-l,w=d[p+1]-m;g[n++]=l+r*h-w*k;g[n++]=m+r*k+w*h;for(r=p+2;r<p+f;++r)g[n++]=d[r]}d&&g.length!=n&&(g.length=n);this.f()}};function ac(b,c){Zb.call(this);this.h=[];bc(this,b,c)}J(ac,Zb);ac.prototype.clone=function(){var b=new ac(null);cc(b,this.g,this.b.slice(),this.h.slice());return b};function bc(b,c,d){if(c){a:{var e=c;if(d)e=$b(d);else{for(d=0;2>d;++d){if(0===e.length){b.g="XY";b.c=2;break a}e=e[0]}e=e.length;d=2==e?"XY":3==e?"XYZ":4==e?"XYZM":void 0}b.g=d;b.c=e}b.b||(b.b=[]);d=b.b;var e=b.c,f=b.h,g=0,f=f?f:[],h=0,k,l;k=0;for(l=c.length;k<l;++k){var m;m=d;for(var n=c[k],p=e,r=void 0,w=void 0,r=0,w=n.length;r<w;++r){var u=n[r],t;for(t=0;t<p;++t)m[g++]=u[t]}m=g;g=f[h++]=m}f.length=h;b.b.length=0===f.length?0:f[f.length-1];b.f()}else cc(b,"XY",null,b.h)}
function cc(b,c,d,e){b.c=$b(c);b.g=c;b.b=d;b.h=e;b.f()};function V(b){S.call(this);b=b||{};this.c=[0,0];var c={};c.center=void 0!==b.center?b.center:null;this.i=Ob(b.projection);var d,e,f,g=void 0!==b.minZoom?b.minZoom:0;d=void 0!==b.maxZoom?b.maxZoom:28;var h=void 0!==b.zoomFactor?b.zoomFactor:2;if(void 0!==b.resolutions)d=b.resolutions,e=d[0],f=d[d.length-1],d=db(d);else{e=Ob(b.projection);f=e.a();var k=(f?Math.max(U(f),qb(f)):360*Cb.degrees/Eb(e))/256/Math.pow(2,0),l=k/Math.pow(2,28);e=b.maxResolution;void 0!==e?g=0:e=k/Math.pow(h,g);f=b.minResolution;
void 0===f&&(f=void 0!==b.maxZoom?void 0!==b.maxResolution?e/Math.pow(h,d):k/Math.pow(h,d):l);d=g+Math.floor(Math.log(e/f)/Math.log(h));f=e/Math.pow(h,d-g);d=eb(h,e,d-g)}this.a=e;this.h=f;this.g=g;g=void 0!==b.extent?za(b.extent):Aa;(void 0!==b.enableRotation?b.enableRotation:1)?(e=b.constrainRotation,e=void 0===e||!0===e?ib():!1===e?gb:ca(e)?hb(e):gb):e=fb;this.b=new Ba(g,d,e);void 0!==b.resolution?c.resolution=b.resolution:void 0!==b.zoom&&(c.resolution=this.constrainResolution(this.a,b.zoom-this.g));
c.rotation=void 0!==b.rotation?b.rotation:0;Wa(this,c)}J(V,S);q=V.prototype;q.constrainResolution=function(b,c,d){return this.b.resolution(b,c||0,d||0)};q.constrainRotation=function(b,c){return this.b.rotation(b,c||0)};q.P=function(){return this.get("center")};q.s=function(){return this.get("resolution")};function dc(b,c){return Math.max(U(b)/c[0],qb(b)/c[1])}function ec(b){var c=b.a,d=Math.log(c/b.h)/Math.log(2);return function(b){return c/Math.pow(2,b*d)}}
function fc(b){return b.get("rotation")}function gc(b){var c=b.a,d=Math.log(c/b.h)/Math.log(2);return function(b){return Math.log(c/b)/Math.log(2)/d}}q.B=function(){var b=this.P(),c=this.i,d=this.s(),e=fc(this);return{center:[Math.round(b[0]/d)*d,Math.round(b[1]/d)*d],projection:void 0!==c?c:null,resolution:d,rotation:e}};q.qb=function(){var b,c=this.s();if(void 0!==c){var d,e=0;do{d=this.constrainResolution(this.a,e);if(d==c){b=e;break}++e}while(d>this.h)}return void 0!==b?this.g+b:b};
q.nb=function(b,c,d){if(!(b instanceof Zb)){var e=b[0],f=b[1],g=b[2],h=b[3],e=[e,f,e,h,g,h,g,f,e,f],f=new ac(null);cc(f,"XY",e,[e.length]);b=f}e=d||{};d=void 0!==e.padding?e.padding:[0,0,0,0];var h=void 0!==e.constrainResolution?e.constrainResolution:!0,f=void 0!==e.nearest?e.nearest:!1,k;void 0!==e.minResolution?k=e.minResolution:void 0!==e.maxZoom?k=this.constrainResolution(this.a,e.maxZoom-this.g,0):k=0;var l=b.b,g=fc(this),e=Math.cos(-g),g=Math.sin(-g),m=Infinity,n=Infinity,p=-Infinity,r=-Infinity;b=b.c;for(var w=0,u=l.length;w<u;w+=b)var t=l[w]*e-l[w+1]*g,A=l[w]*g+l[w+1]*e,m=Math.min(m,t),n=Math.min(n,A),p=Math.max(p,t),r=Math.max(r,A);c=dc([m,n,p,r],[c[0]-d[1]-d[3],c[1]-d[0]-d[2]]);c=isNaN(c)?k:Math.max(c,k);h&&(k=this.constrainResolution(c,0,0),!f&&k<c&&(k=this.constrainResolution(k,-1,0)),c=k);this.V(c);g=-g;k=(m+p)/2+(d[1]-d[3])/2*c;c=(n+r)/2+(d[0]-d[2])/2*c;this.U([k*e-c*g,c*e+k*g])};
q.rotate=function(b,c){if(void 0!==c){var d,e=this.P();void 0!==e&&(d=[e[0]-c[0],e[1]-c[1]],kb(d,b-fc(this)),jb(d,c));this.U(d)}this.set("rotation",b)};q.U=function(b){this.set("center",b)};function hc(b,c){b.c[1]+=c}q.V=function(b){this.set("resolution",b)};q.oc=function(b){b=this.constrainResolution(this.a,b-this.g,0);this.V(b)};function ic(b){return 1-Math.pow(1-b,3)}function jc(b){return 3*b*b-2*b*b*b}function kc(b){return b};function lc(b){var c=b.source,d=b.start?b.start:Date.now(),e=c[0],f=c[1],g=void 0!==b.duration?b.duration:1E3,h=b.easing?b.easing:jc;return function(b,c){if(c.time<d)return c.animate=!0,c.viewHints[0]+=1,!0;if(c.time<d+g){var m=1-h((c.time-d)/g),n=e-c.viewState.center[0],p=f-c.viewState.center[1];c.animate=!0;c.viewState.center[0]+=m*n;c.viewState.center[1]+=m*p;c.viewHints[0]+=1;return!0}return!1}}
function mc(b){var c=b.rotation?b.rotation:0,d=b.start?b.start:Date.now(),e=void 0!==b.duration?b.duration:1E3,f=b.easing?b.easing:jc,g=b.anchor?b.anchor:null;return function(b,k){if(k.time<d)return k.animate=!0,k.viewHints[0]+=1,!0;if(k.time<d+e){var l=1-f((k.time-d)/e),l=(c-k.viewState.rotation)*l;k.animate=!0;k.viewState.rotation+=l;if(g){var m=k.viewState.center;m[0]-=g[0];m[1]-=g[1];kb(m,l);jb(m,g)}k.viewHints[0]+=1;return!0}return!1}}
function nc(b){var c=b.resolution,d=b.start?b.start:Date.now(),e=void 0!==b.duration?b.duration:1E3,f=b.easing?b.easing:jc;return function(b,h){if(h.time<d)return h.animate=!0,h.viewHints[0]+=1,!0;if(h.time<d+e){var k=1-f((h.time-d)/e),l=c-h.viewState.resolution;h.animate=!0;h.viewState.resolution+=k*l;h.viewHints[0]+=1;return!0}return!1}};function oc(b,c,d,e){this.f=b;this.a=c;this.c=d;this.b=e}function pc(b,c,d){return b.f<=c&&c<=b.a&&b.c<=d&&d<=b.b}oc.prototype.na=function(){return this.a-this.f+1};function qc(b,c){return b.f<=c.a&&b.a>=c.f&&b.c<=c.b&&b.b>=c.c};function rc(b){this.f=b.html;this.a=b.tileRanges?b.tileRanges:null};function sc(b,c,d){Q.call(this,b,d);this.element=c}J(sc,Q);function tc(b){S.call(this);this.a=b?b:[];uc(this)}J(tc,S);q=tc.prototype;q.clear=function(){for(;0<this.get("length");)vc(this,this.get("length")-1)};q.$b=function(b){var c,d;c=0;for(d=b.length;c<d;++c)this.push(b[c]);return this};function wc(b,c,d){b.a.forEach(c,d)}q.item=function(b){return this.a[b]};q.push=function(b){var c=this.a.length;this.a.splice(c,0,b);uc(this);R(this,new sc("add",b,this));return c};
q.remove=function(b){var c=this.a,d,e;d=0;for(e=c.length;d<e;++d)if(c[d]===b)return vc(this,d)};function vc(b,c){var d=b.a[c];b.a.splice(c,1);uc(b);R(b,new sc("remove",d,b));return d}function uc(b){b.set("length",b.a.length)};function xc(b,c){Array.prototype.forEach.call(b,c,void 0)}function yc(b){var c=b.length;if(0<c){for(var d=Array(c),e=0;e<c;e++)d[e]=b[e];return d}return[]};function zc(b){if("string"!==typeof b){var c=b[0];c!=(c|0)&&(c=c+.5|0);var d=b[1];d!=(d|0)&&(d=d+.5|0);var e=b[2];e!=(e|0)&&(e=e+.5|0);b="rgba("+c+","+d+","+e+","+(void 0===b[3]?1:b[3])+")"}return b};var Ac;a:{var Bc=v.navigator;if(Bc){var Cc=Bc.userAgent;if(Cc){Ac=Cc;break a}}Ac=""}function X(b){return-1!=Ac.indexOf(b)};function Dc(b,c){for(var d in b)c.call(void 0,b[d],d,b)}var Ec="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Fc(b,c){for(var d,e,f=1;f<arguments.length;f++){e=arguments[f];for(d in e)b[d]=e[d];for(var g=0;g<Ec.length;g++)d=Ec[g],Object.prototype.hasOwnProperty.call(e,d)&&(b[d]=e[d])}};var Gc=X("Opera")||X("OPR"),Hc=X("Trident")||X("MSIE"),Ic=X("Edge"),Jc=X("Gecko")&&!(-1!=Ac.toLowerCase().indexOf("webkit")&&!X("Edge"))&&!(X("Trident")||X("MSIE"))&&!X("Edge"),Kc=-1!=Ac.toLowerCase().indexOf("webkit")&&!X("Edge");function Lc(){var b=v.document;return b?b.documentMode:void 0}var Mc;a:{var Nc="",Oc=function(){var b=Ac;if(Jc)return/rv\:([^\);]+)(\)|;)/.exec(b);if(Ic)return/Edge\/([\d\.]+)/.exec(b);if(Hc)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(b);if(Kc)return/WebKit\/(\S+)/.exec(b);if(Gc)return/(?:Version)[ \/]?(\S+)/.exec(b)}();Oc&&(Nc=Oc?Oc[1]:"");if(Hc){var Pc=Lc();if(null!=Pc&&Pc>parseFloat(Nc)){Mc=String(Pc);break a}}Mc=Nc}var Qc={};function Rc(b){var c;if(!(c=Qc[b])){c=0;for(var d=la(String(Mc)).split("."),e=la(String(b)).split("."),f=Math.max(d.length,e.length),g=0;0==c&&g<f;g++){var h=d[g]||"",k=e[g]||"",l=RegExp("(\\d*)(\\D*)","g"),m=RegExp("(\\d*)(\\D*)","g");do{var n=l.exec(h)||["","",""],p=m.exec(k)||["","",""];if(0==n[0].length&&0==p[0].length)break;c=ua(0==n[1].length?0:parseInt(n[1],10),0==p[1].length?0:parseInt(p[1],10))||ua(0==n[2].length,0==p[2].length)||ua(n[2],p[2])}while(0==c)}c=Qc[b]=0<=c}return c}
var Sc=v.document,Tc=Sc&&Hc?Lc()||("CSS1Compat"==Sc.compatMode?parseInt(Mc,10):5):void 0;var Uc=!Hc||9<=Number(Tc);!Jc&&!Hc||Hc&&9<=Number(Tc)||Jc&&Rc("1.9.1");Hc&&Rc("9");function Vc(b,c){this.width=b;this.height=c}q=Vc.prototype;q.clone=function(){return new Vc(this.width,this.height)};q.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};q.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};q.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};q.scale=function(b,c){var d=ca(c)?c:b;this.width*=b;this.height*=d;return this};function Wc(b){var c=document;return"string"==typeof b?c.getElementById(b):b}function Xc(b,c){Dc(c,function(c,e){"style"==e?b.style.cssText=c:"class"==e?b.className=c:"for"==e?b.htmlFor=c:Yc.hasOwnProperty(e)?b.setAttribute(Yc[e],c):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?b.setAttribute(e,c):b[e]=c})}
var Yc={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Zc(b,c,d){var e=arguments,f=document,g=e[0],h=e[1];if(!Uc&&h&&(h.name||h.type)){g=["<",g];h.name&&g.push(' name="',ma(h.name),'"');if(h.type){g.push(' type="',ma(h.type),'"');var k={};Fc(k,h);delete k.type;h=k}g.push(">");g=g.join("")}g=f.createElement(g);h&&("string"==typeof h?g.className=h:"array"==aa(h)?g.className=h.join(" "):Xc(g,h));2<e.length&&$c(f,g,e);return g}
function $c(b,c,d){function e(d){d&&c.appendChild("string"==typeof d?b.createTextNode(d):d)}for(var f=2;f<d.length;f++){var g=d[f];!ba(g)||da(g)&&0<g.nodeType?e(g):xc(ad(g)?yc(g):g,e)}}function bd(b,c,d){b.insertBefore(c,b.childNodes[d]||null)}function cd(b){b&&b.parentNode&&b.parentNode.removeChild(b)}
function dd(b,c){if(!b||!c)return!1;if(b.contains&&1==c.nodeType)return b==c||b.contains(c);if("undefined"!=typeof b.compareDocumentPosition)return b==c||!!(b.compareDocumentPosition(c)&16);for(;c&&b!=c;)c=c.parentNode;return c==b}function ad(b){if(b&&"number"==typeof b.length){if(da(b))return"function"==typeof b.item||"string"==typeof b.item;if("function"==aa(b))return"function"==typeof b.item}return!1}function ed(b){this.a=b||v.document||document}ed.prototype.createElement=function(b){return this.a.createElement(b)};ed.prototype.appendChild=function(b,c){b.appendChild(c)};function fd(b,c,d,e){this.top=b;this.right=c;this.bottom=d;this.left=e}q=fd.prototype;q.na=function(){return this.right-this.left};q.clone=function(){return new fd(this.top,this.right,this.bottom,this.left)};q.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};q.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};q.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};q.scale=function(b,c){var d=ca(c)?c:b;this.left*=b;this.right*=b;this.top*=d;this.bottom*=d;return this};function gd(b,c){var d=9==b.nodeType?b:b.ownerDocument||b.document;return d.defaultView&&d.defaultView.getComputedStyle&&(d=d.defaultView.getComputedStyle(b,null))?d[c]||d.getPropertyValue(c)||"":""}
function hd(b){var c=b.offsetWidth,d=b.offsetHeight,e=Kc&&!c&&!d;if((void 0===c||e)&&b.getBoundingClientRect){var f;a:{try{f=b.getBoundingClientRect()}catch(g){f={left:0,top:0,right:0,bottom:0};break a}Hc&&b.ownerDocument.body&&(b=b.ownerDocument,f.left-=b.documentElement.clientLeft+b.body.clientLeft,f.top-=b.documentElement.clientTop+b.body.clientTop)}return new Vc(f.right-f.left,f.bottom-f.top)}return new Vc(c,d)}function id(b,c){b.style.display=c?"":"none"}
function jd(b,c,d,e){if(/^\d+px?$/.test(c))return parseInt(c,10);var f=b.style[d],g=b.runtimeStyle[d];b.runtimeStyle[d]=b.currentStyle[d];b.style[d]=c;c=b.style[e];b.style[d]=f;b.runtimeStyle[d]=g;return c}function kd(b,c){var d=b.currentStyle?b.currentStyle[c]:null;return d?jd(b,d,"left","pixelLeft"):0}
function ld(b,c){if(Hc){var d=kd(b,c+"Left"),e=kd(b,c+"Right"),f=kd(b,c+"Top"),g=kd(b,c+"Bottom");return new fd(f,e,g,d)}d=gd(b,c+"Left");e=gd(b,c+"Right");f=gd(b,c+"Top");g=gd(b,c+"Bottom");return new fd(parseFloat(f),parseFloat(e),parseFloat(g),parseFloat(d))}var md={thin:2,medium:4,thick:6};function nd(b,c){if("none"==(b.currentStyle?b.currentStyle[c+"Style"]:null))return 0;var d=b.currentStyle?b.currentStyle[c+"Width"]:null;return d in md?md[d]:jd(b,d,"left","pixelLeft")};function od(b,c,d){Q.call(this,b);this.map=c;this.frameState=void 0!==d?d:null}J(od,Q);function pd(b){S.call(this);this.element=b.element?b.element:null;this.a=this.O=null;this.o=[];this.render=b.render?b.render:ja;b.target&&(this.O=Wc(b.target))}J(pd,S);pd.prototype.C=function(){cd(this.element);pd.L.C.call(this)};pd.prototype.setMap=function(b){this.a&&cd(this.element);for(var c=0,d=this.o.length;c<d;++c)N(this.o[c]);this.o.length=0;if(this.a=b)(this.O?this.O:b.l).appendChild(this.element),this.render!==ja&&this.o.push(P(b,"postrender",this.render,this)),b.render()};function qd(){this.c=0;this.b={};this.a=this.f=null}qd.prototype.clear=function(){this.c=0;this.b={};this.a=this.f=null};qd.prototype.get=function(b){b=this.b[b];if(b===this.a)return b.ha;b===this.f?(this.f=this.f.R,this.f.ba=null):(b.R.ba=b.ba,b.ba.R=b.R);b.R=null;b.ba=this.a;this.a=this.a.R=b;return b.ha};qd.prototype.replace=function(b,c){this.get(b);this.b[b].ha=c};qd.prototype.set=function(b,c){var d={ga:b,R:null,ba:this.a,ha:c};this.a?this.a.R=d:this.f=d;this.a=d;this.b[b]=d;++this.c};function rd(b,c,d,e){return void 0!==e?(e[0]=b,e[1]=c,e[2]=d,e):[b,c,d]};function sd(b){qd.call(this);this.j=void 0!==b?b:2048}J(sd,qd);function td(b){return b.c>b.j}sd.prototype.$=function(b){for(var c,d;td(this);){c=this.f.ha;d=c.G[0].toString();var e;if(e=d in b)c=c.G,e=pc(b[d],c[1],c[2]);if(e)break;else d=this.f,delete this.b[d.ga],d.R&&(d.R.ba=null),this.f=d.R,this.f||(this.a=null),--this.c,Pa(d.ha)}};function ud(b,c){Sa.call(this);this.G=b;this.state=c;this.a=null;this.key=""}J(ud,Sa);function vd(b){R(b,"change")}ud.prototype.getKey=function(){return y(this).toString()};ud.prototype.B=function(){return this.state};function wd(b,c){if(Array.isArray(b))return b;void 0===c?c=[b,b]:(c[0]=b,c[1]=b);return c};function xd(b){S.call(this);this.b=Gb(b.projection);this.o=yd(b.attributions);this.S=b.logo;this.l=void 0!==b.state?b.state:"ready";this.ka=void 0!==b.wrapX?b.wrapX:!1}J(xd,S);function yd(b){if("string"===typeof b)return[new rc({html:b})];if(b instanceof rc)return[b];if(Array.isArray(b)){for(var c=b.length,d=Array(c),e=0;e<c;e++){var f=b[e];d[e]="string"===typeof f?new rc({html:f}):f}return d}return null}xd.prototype.B=function(){return this.l};function zd(b){this.minZoom=void 0!==b.minZoom?b.minZoom:0;this.c=b.resolutions;this.maxZoom=this.c.length-1;this.b=void 0!==b.origin?b.origin:null;this.g=null;void 0!==b.origins&&(this.g=b.origins);var c=b.extent;void 0===c||this.b||this.g||(this.b=vb(c));this.u=null;void 0!==b.tileSizes&&(this.u=b.tileSizes);this.h=void 0!==b.tileSize?b.tileSize:this.u?null:256;this.H=void 0!==c?c:null;this.f=null;this.j=[0,0];void 0!==b.sizes?this.f=b.sizes.map(function(b){return new oc(Math.min(0,b[0]),Math.max(b[0]-
1,-1),Math.min(0,b[1]),Math.max(b[1]-1,-1))},this):c&&Ad(this,c)}var Bd=[0,0,0];function Cd(b,c,d,e,f){f=Dd(b,c,f);for(c=c[0]-1;c>=b.minZoom;){if(d.call(null,c,Ed(b,f,c,e)))return!0;--c}return!1}zd.prototype.a=function(){return this.H};zd.prototype.ea=function(b){return this.b?this.b:this.g[b]};zd.prototype.s=function(b){return this.c[b]};function Fd(b,c,d,e){return c[0]<b.maxZoom?(e=Dd(b,c,e),Ed(b,e,c[0]+1,d)):null}
function Gd(b,c,d,e){Hd(b,c[0],c[1],d,!1,Bd);var f=Bd[1],g=Bd[2];Hd(b,c[2],c[3],d,!0,Bd);b=Bd[1];c=Bd[2];void 0!==e?(e.f=f,e.a=b,e.c=g,e.b=c):e=new oc(f,b,g,c);return e}function Ed(b,c,d,e){d=b.s(d);return Gd(b,c,d,e)}function Id(b,c){var d=b.ea(c[0]),e=b.s(c[0]),f=wd(Jd(b,c[0]),b.j);return[d[0]+(c[1]+.5)*f[0]*e,d[1]+(c[2]+.5)*f[1]*e]}function Dd(b,c,d){var e=b.ea(c[0]),f=b.s(c[0]);b=wd(Jd(b,c[0]),b.j);var g=e[0]+c[1]*b[0]*f;c=e[1]+c[2]*b[1]*f;return ob(g,c,g+b[0]*f,c+b[1]*f,d)}
function Hd(b,c,d,e,f,g){var h=Kd(b,e),k=e/b.s(h),l=b.ea(h);b=wd(Jd(b,h),b.j);c=k*Math.floor((c-l[0])/e+(f?.5:0))/b[0];d=k*Math.floor((d-l[1])/e+(f?0:.5))/b[1];f?(c=Math.ceil(c)-1,d=Math.ceil(d)-1):(c=Math.floor(c),d=Math.floor(d));return rd(h,c,d,g)}function Ld(b,c,d,e){d=b.s(d);return Hd(b,c[0],c[1],d,!1,e)}function Jd(b,c){return b.h?b.h:b.u[c]}function Kd(b,c,d){c=$a(b.c,c,d||0);return wa(c,b.minZoom,b.maxZoom)}
function Ad(b,c){for(var d=b.c.length,e=Array(d),f=b.minZoom;f<d;++f)e[f]=Ed(b,c,f);b.f=e}function Md(b){var c=b.g;if(!c){var c=Nd(b),d=Od(c,void 0,void 0),c=new zd({extent:c,origin:vb(c),resolutions:d,tileSize:void 0});b.g=c}return c}function Pd(b){var c={};Ea(c,void 0!==b?b:{});void 0===c.extent&&(c.extent=Gb("EPSG:3857").a());c.resolutions=Od(c.extent,c.maxZoom,c.tileSize);delete c.maxZoom;return new zd(c)}
function Od(b,c,d){c=void 0!==c?c:42;var e=qb(b);b=U(b);d=wd(void 0!==d?d:256);d=Math.max(b/d[0],e/d[1]);c+=1;e=Array(c);for(b=0;b<c;++b)e[b]=d/Math.pow(2,b);return e}function Nd(b){b=Gb(b);var c=b.a();c||(b=180*Cb.degrees/Eb(b),c=ob(-b,-b,b,b));return c};function Qd(b){xd.call(this,{attributions:b.attributions,extent:b.extent,logo:b.logo,projection:b.projection,state:b.state,wrapX:b.wrapX});this.Z=void 0!==b.opaque?b.opaque:!1;this.A=void 0!==b.tilePixelRatio?b.tilePixelRatio:1;this.tileGrid=void 0!==b.tileGrid?b.tileGrid:null;this.a=new sd(b.cacheSize);this.D=[0,0];this.ga=""}J(Qd,xd);q=Qd.prototype;q.Na=function(){return td(this.a)};q.$=function(b,c){var d=this.fa(b);d&&d.$(c)};function Rd(b,c,d,e,f){c=b.fa(c);if(!c)return!1;for(var g=!0,h,k,l=e.f;l<=e.a;++l)for(var m=e.c;m<=e.b;++m)h=b.la(d,l,m),k=!1,c.b.hasOwnProperty(h)&&(h=c.get(h),(k=2===h.B())&&(k=!1!==f(h))),k||(g=!1);return g}q.ua=function(){return 0};q.getKey=function(){return this.ga};q.la=function(b,c,d){return b+"/"+c+"/"+d};q.ma=function(){return this.Z};q.T=function(b){return this.tileGrid?this.tileGrid:Md(b)};q.fa=function(b){var c=this.b;return c&&!Pb(c,b)?null:this.a};function Sd(b,c,d){var e=b.T(d);d=b.A;c=wd(Jd(e,c),b.D);1==d?b=c:(b=b.D,void 0===b&&(b=[0,0]),b[0]=c[0]*d+.5|0,b[1]=c[1]*d+.5|0);return b}function Td(b,c,d){var e=void 0!==d?d:b.b;d=b.T(e);if(b.ka&&e.b){var f=c;c=f[0];b=Id(d,f);var e=Nd(e),g=b[0],h=b[1];e[0]<=g&&g<=e[2]&&e[1]<=h&&h<=e[3]?c=f:(f=U(e),b[0]+=f*Math.ceil((e[0]-b[0])/f),c=Ld(d,b,c))}e=c[0];b=c[1];f=c[2];d=d.minZoom>e||e>d.maxZoom?!1:(d=(g=d.a())?Ed(d,g,e):d.f?d.f[e]:null)?pc(d,b,f):!0;return d?c:null}q.Ua=ja;
function Ud(b,c){Q.call(this,b);this.tile=c}J(Ud,Q);function Vd(b){b=b?b:{};this.w=document.createElement("UL");this.h=document.createElement("LI");this.w.appendChild(this.h);id(this.h,!1);this.g=void 0!==b.collapsed?b.collapsed:!0;this.i=void 0!==b.collapsible?b.collapsible:!0;this.i||(this.g=!1);var c=void 0!==b.className?b.className:"ol-attribution",d=void 0!==b.tipLabel?b.tipLabel:"Attributions",e=void 0!==b.collapseLabel?b.collapseLabel:"\u00bb";this.A="string"===typeof e?Zc("SPAN",{},e):e;e=void 0!==b.label?b.label:"i";this.D="string"===typeof e?Zc("SPAN",{},e):e;d=Zc("BUTTON",{type:"button",title:d},this.i&&!this.g?this.A:this.D);P(d,"click",this.N,this);c=Zc("DIV",c+" ol-unselectable ol-control"+(this.g&&this.i?" ol-collapsed":"")+(this.i?"":" ol-uncollapsible"),this.w,d);pd.call(this,{element:c,render:b.render?b.render:Wd,target:b.target});this.l=!0;this.c={};this.b={};this.J={}}J(Vd,pd);function Wd(b){if(b=b.frameState){var c,d,e,f,g,h,k,l,m,n,p,r=b.layerStatesArray,w=Ea({},b.attributions),u={},t=b.viewState.projection;d=0;for(c=r.length;d<c;d++)if(h=r[d].layer.X())if(n=y(h).toString(),m=h.o)for(e=0,f=m.length;e<f;e++)if(k=m[e],l=y(k).toString(),!(l in w)){if(g=b.usedTiles[n]){var A=h.T(t);a:{p=k;var O=t;if(p.a){var x=void 0,B=void 0,H=void 0,E=void 0;for(E in g)if(E in p.a)for(var H=g[E],C,x=0,B=p.a[E].length;x<B;++x){C=p.a[E][x];if(qc(C,H)){p=!0;break a}var T=Ed(A,Nd(O),parseInt(E,10)),L=T.na();if(H.f<T.f||H.a>T.a)if(qc(C,new oc(ya(H.f,L),ya(H.a,L),H.c,H.b))||H.na()>L&&qc(C,T)){p=!0;break a}}p=!1}else p=!0}}else p=!1;p?(l in u&&delete u[l],w[l]=k):u[l]=k}c=[w,u];d=c[0];c=c[1];for(var z in this.c)z in d?(this.b[z]||(id(this.c[z],!0),this.b[z]=!0),delete d[z]):z in c?(this.b[z]&&(id(this.c[z],!1),delete this.b[z]),delete c[z]):(cd(this.c[z]),delete this.c[z],delete this.b[z]);for(z in d)e=document.createElement("LI"),e.innerHTML=d[z].f,this.w.appendChild(e),this.c[z]=e,this.b[z]=!0;for(z in c)e=document.createElement("LI"),e.innerHTML=c[z].f,id(e,!1),this.w.appendChild(e),this.c[z]=e;z=!Ga(this.b)||!Ga(b.logos);this.l!=z&&(id(this.element,z),this.l=z);z&&Ga(this.b)?this.element.classList.add("ol-logo-only"):this.element.classList.remove("ol-logo-only");var D;b=b.logos;z=this.J;for(D in z)D in b||(cd(z[D]),delete z[D]);for(var M in b)d=b[M],d instanceof HTMLElement&&(this.h.appendChild(d),z[M]=d),M in z||(D=new Image,D.src=M,""===d?d=D:(d=Zc("A",{href:d}),d.appendChild(D)),this.h.appendChild(d),z[M]=d);id(this.h,!Ga(b))}else this.l&&(id(this.element,!1),this.l=!1)}Vd.prototype.N=function(b){b.preventDefault();this.element.classList.toggle("ol-collapsed");if(this.g){b=this.D;var c=b.parentNode;c&&c.replaceChild(this.A,b)}else b=this.A,(c=b.parentNode)&&c.replaceChild(this.D,b);this.g=!this.g};function Xd(b){b=b?b:{};var c=void 0!==b.className?b.className:"ol-rotate",d=void 0!==b.label?b.label:"\u21e7";this.b=null;"string"===typeof d?this.b=Zc("SPAN","ol-compass",d):(this.b=d,this.b.classList.add("ol-compass"));d=Zc("BUTTON",{"class":c+"-reset",type:"button",title:b.tipLabel?b.tipLabel:"Reset rotation"},this.b);P(d,"click",Xd.prototype.l,this);c=Zc("DIV",c+" ol-unselectable ol-control",d);d=b.render?b.render:Yd;this.g=b.resetNorth?b.resetNorth:void 0;pd.call(this,{element:c,render:d,target:b.target});this.h=void 0!==b.duration?b.duration:250;this.c=void 0!==b.autoHide?b.autoHide:!0;this.i=void 0;this.c&&this.element.classList.add("ol-hidden")}J(Xd,pd);Xd.prototype.l=function(b){b.preventDefault();if(void 0!==this.g)this.g();else{b=this.a;var c=Y(b);if(c){var d=fc(c);void 0!==d&&(0<this.h&&(d%=2*Math.PI,d<-Math.PI&&(d+=2*Math.PI),d>Math.PI&&(d-=2*Math.PI),b.K(mc({rotation:d,duration:this.h,easing:ic}))),c.set("rotation",0))}}};function Yd(b){if(b=b.frameState){b=b.viewState.rotation;if(b!=this.i){var c="rotate("+b+"rad)";if(this.c){var d=this.element.classList.contains("ol-hidden");d||0!==b?d&&0!==b&&this.element.classList.remove("ol-hidden"):this.element.classList.add("ol-hidden")}this.b.style.msTransform=c;this.b.style.webkitTransform=c;this.b.style.transform=c}this.i=b}};function Zd(b){b=b?b:{};var c=void 0!==b.className?b.className:"ol-zoom",d=void 0!==b.delta?b.delta:1,e=void 0!==b.zoomOutLabel?b.zoomOutLabel:"\u2212",f=void 0!==b.zoomOutTipLabel?b.zoomOutTipLabel:"Zoom out",g=Zc("BUTTON",{"class":c+"-in",type:"button",title:void 0!==b.zoomInTipLabel?b.zoomInTipLabel:"Zoom in"},void 0!==b.zoomInLabel?b.zoomInLabel:"+");P(g,"click",Zd.prototype.c.bind(this,d));e=Zc("BUTTON",{"class":c+"-out",type:"button",title:f},e);P(e,"click",Zd.prototype.c.bind(this,-d));c=Zc("DIV",c+" ol-unselectable ol-control",g,e);pd.call(this,{element:c,target:b.target});this.b=void 0!==b.duration?b.duration:250}J(Zd,pd);Zd.prototype.c=function(b,c){c.preventDefault();var d=this.a,e=Y(d);if(e){var f=e.s();f&&(0<this.b&&d.K(nc({resolution:f,duration:this.b,easing:ic})),d=e.constrainResolution(f,b),e.V(d))}};function $d(b){b=b?b:{};var c=new tc;(void 0!==b.zoom?b.zoom:1)&&c.push(new Zd(b.zoomOptions));(void 0!==b.rotate?b.rotate:1)&&c.push(new Xd(b.rotateOptions));(void 0!==b.attribution?b.attribution:1)&&c.push(new Vd(b.attributionOptions));return c};var ae;function be(){var b=v.MessageChannel;"undefined"===typeof b&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!X("Presto")&&(b=function(){var b=document.createElement("IFRAME");b.style.display="none";b.src="";document.documentElement.appendChild(b);var c=b.contentWindow,b=c.document;b.open();b.write("");b.close();var d="callImmediate"+Math.random(),e="file:"==c.location.protocol?"*":c.location.protocol+"//"+c.location.host,b=ia(function(b){if(("*"==e||b.origin==e)&&b.data==d)this.port1.onmessage()},this);c.addEventListener("message",b,!1);this.port1={};this.port2={postMessage:function(){c.postMessage(d,e)}}});if("undefined"!==typeof b&&!X("Trident")&&!X("MSIE")){var c=new b,d={},e=d;c.port1.onmessage=function(){if(void 0!==d.next){d=d.next;var b=d.Ha;d.Ha=null;b()}};return function(b){e.next={Ha:b};e=e.next;c.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(b){var c=document.createElement("SCRIPT");c.onreadystatechange=function(){c.onreadystatechange=null;c.parentNode.removeChild(c);c=null;b();b=null};document.documentElement.appendChild(c)}:function(b){v.setTimeout(b,0)}};function ce(b,c,d){Q.call(this,b);this.a=c;b=d?d:{};this.buttons=de(b);this.pressure=ee(b,this.buttons);this.bubbles="bubbles"in b?b.bubbles:!1;this.cancelable="cancelable"in b?b.cancelable:!1;this.view="view"in b?b.view:null;this.detail="detail"in b?b.detail:null;this.screenX="screenX"in b?b.screenX:0;this.screenY="screenY"in b?b.screenY:0;this.clientX="clientX"in b?b.clientX:0;this.clientY="clientY"in b?b.clientY:0;this.button="button"in b?b.button:0;this.relatedTarget="relatedTarget"in b?b.relatedTarget:null;this.pointerId="pointerId"in b?b.pointerId:0;this.width="width"in b?b.width:0;this.height="height"in b?b.height:0;this.pointerType="pointerType"in b?b.pointerType:"";this.isPrimary="isPrimary"in b?b.isPrimary:!1;c.preventDefault&&(this.preventDefault=function(){c.preventDefault()})}J(ce,Q);function de(b){if(b.buttons||fe)b=b.buttons;else switch(b.which){case 1:b=1;break;case 2:b=4;break;case 3:b=2;break;default:b=0}return b}function ee(b,c){var d=0;b.pressure?d=b.pressure:d=c?.5:0;return d}
var fe=!1;try{fe=1===(new MouseEvent("click",{buttons:1})).buttons}catch(b){};function ge(b,c){var d=document.createElement("CANVAS");b&&(d.width=b);c&&(d.height=c);return d.getContext("2d")}
var he=function(){var b;return function(){if(void 0===b){var c=document.createElement("P"),d,e={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.appendChild(c);for(var f in e)f in c.style&&(c.style[f]="translate(1px,1px)",d=K.getComputedStyle(c).getPropertyValue(e[f]));document.body.removeChild(c);b=d&&"none"!==d}return b}}(),ie=function(){var b;return function(){if(void 0===b){var c=document.createElement("P"),d,e={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.appendChild(c);for(var f in e)f in c.style&&(c.style[f]="translate3d(1px,1px,1px)",d=K.getComputedStyle(c).getPropertyValue(e[f]));document.body.removeChild(c);b=d&&"none"!==d}return b}}();function je(b,c){var d=b.style;d.WebkitTransform=c;d.MozTransform=c;d.a=c;d.msTransform=c;d.transform=c;Hc&&Rc("9.0")&&(b.style.transformOrigin="0 0")};var ke="undefined"!==typeof navigator?navigator.userAgent.toLowerCase():"",le=-1!==ke.indexOf("firefox"),me=-1!==ke.indexOf("safari")&&-1===ke.indexOf("chrom"),ne=-1!==ke.indexOf("macintosh"),oe=K.devicePixelRatio||1,pe=function(){if(!("HTMLCanvasElement"in K))return!1;try{return ge()?!0:!1}catch(b){return!1}}(),qe="ontouchstart"in K,re="PointerEvent"in K,se=!!K.navigator.msPointerEnabled;function te(b,c){this.a=b;this.j=c};function ue(b){te.call(this,b,{mousedown:this.Mb,mousemove:this.Nb,mouseup:this.Qb,mouseover:this.Pb,mouseout:this.Ob});this.f=b.f;this.b=[]}J(ue,te);function ve(b,c){for(var d=b.b,e=c.clientX,f=c.clientY,g=0,h=d.length,k;g<h&&(k=d[g]);g++){var l=Math.abs(f-k[1]);if(25>=Math.abs(e-k[0])&&25>=l)return!0}return!1}function we(b){var c=xe(b,b),d=c.preventDefault;c.preventDefault=function(){b.preventDefault();d()};c.pointerId=1;c.isPrimary=!0;c.pointerType="mouse";return c}q=ue.prototype;q.Mb=function(b){if(!ve(this,b)){if((1).toString()in this.f){var c=we(b);Z(this.a,ye,c,b);delete this.f[(1).toString()]}c=we(b);this.f[(1).toString()]=b;Z(this.a,ze,c,b)}};q.Nb=function(b){if(!ve(this,b)){var c=we(b);Z(this.a,Ae,c,b)}};q.Qb=function(b){if(!ve(this,b)){var c=this.f[(1).toString()];c&&c.button===b.button&&(c=we(b),Z(this.a,Be,c,b),delete this.f[(1).toString()])}};q.Pb=function(b){if(!ve(this,b)){var c=we(b);Ce(this.a,c,b)}};q.Ob=function(b){if(!ve(this,b)){var c=we(b);De(this.a,c,b)}};function Ee(b){te.call(this,b,{MSPointerDown:this.Vb,MSPointerMove:this.Wb,MSPointerUp:this.Zb,MSPointerOut:this.Xb,MSPointerOver:this.Yb,MSPointerCancel:this.Ub,MSGotPointerCapture:this.Sb,MSLostPointerCapture:this.Tb});this.f=b.f;this.b=["","unavailable","touch","pen","mouse"]}J(Ee,te);function Fe(b,c){var d=c;ca(c.pointerType)&&(d=xe(c,c),d.pointerType=b.b[c.pointerType]);return d}q=Ee.prototype;q.Vb=function(b){this.f[b.pointerId.toString()]=b;var c=Fe(this,b);Z(this.a,ze,c,b)};q.Wb=function(b){var c=Fe(this,b);Z(this.a,Ae,c,b)};q.Zb=function(b){var c=Fe(this,b);Z(this.a,Be,c,b);delete this.f[b.pointerId.toString()]};q.Xb=function(b){var c=Fe(this,b);De(this.a,c,b)};q.Yb=function(b){var c=Fe(this,b);Ce(this.a,c,b)};q.Ub=function(b){var c=Fe(this,b);Z(this.a,ye,c,b);delete this.f[b.pointerId.toString()]};q.Tb=function(b){R(this.a,new ce("lostpointercapture",b,b))};q.Sb=function(b){R(this.a,new ce("gotpointercapture",b,b))};function Ge(b){te.call(this,b,{pointerdown:this.fc,pointermove:this.gc,pointerup:this.jc,pointerout:this.hc,pointerover:this.ic,pointercancel:this.ec,gotpointercapture:this.rb,lostpointercapture:this.Kb})}J(Ge,te);q=Ge.prototype;q.fc=function(b){He(this.a,b)};q.gc=function(b){He(this.a,b)};q.jc=function(b){He(this.a,b)};q.hc=function(b){He(this.a,b)};q.ic=function(b){He(this.a,b)};q.ec=function(b){He(this.a,b)};q.Kb=function(b){He(this.a,b)};q.rb=function(b){He(this.a,b)};function Ie(b,c){te.call(this,b,{touchstart:this.sc,touchmove:this.rc,touchend:this.qc,touchcancel:this.pc});this.f=b.f;this.u=c;this.b=void 0;this.g=0;this.c=void 0}J(Ie,te);q=Ie.prototype;q.Ra=function(){this.g=0;this.c=void 0};function Je(b,c,d){c=xe(c,d);c.pointerId=d.identifier+2;c.bubbles=!0;c.cancelable=!0;c.detail=b.g;c.button=0;c.buttons=1;c.width=d.webkitRadiusX||d.radiusX||0;c.height=d.webkitRadiusY||d.radiusY||0;c.pressure=d.webkitForce||d.force||.5;c.isPrimary=b.b===d.identifier;c.pointerType="touch";c.clientX=d.clientX;c.clientY=d.clientY;c.screenX=d.screenX;c.screenY=d.screenY;return c}
function Ke(b,c,d){function e(){c.preventDefault()}var f=Array.prototype.slice.call(c.changedTouches),g=f.length,h,k;for(h=0;h<g;++h)k=Je(b,c,f[h]),k.preventDefault=e,d.call(b,c,k)}
q.sc=function(b){var c=b.touches,d=Object.keys(this.f),e=d.length;if(e>=c.length){var f=[],g,h,k;for(g=0;g<e;++g){h=d[g];k=this.f[h];var l;if(!(l=1==h))a:{l=c.length;for(var m=void 0,n=0;n<l;n++)if(m=c[n],m.identifier===h-2){l=!0;break a}l=!1}l||f.push(k.out)}for(g=0;g<f.length;++g)this.ra(b,f[g])}c=b.changedTouches[0];d=Object.keys(this.f).length;if(0===d||1===d&&(1).toString()in this.f)this.b=c.identifier,void 0!==this.c&&K.clearTimeout(this.c);Le(this,b);this.g++;Ke(this,b,this.dc)};q.dc=function(b,c){this.f[c.pointerId]={target:c.target,out:c,Oa:c.target};var d=this.a;c.bubbles=!0;Z(d,Me,c,b);d=this.a;c.bubbles=!1;Z(d,Ne,c,b);Z(this.a,ze,c,b)};q.rc=function(b){b.preventDefault();Ke(this,b,this.Rb)};q.Rb=function(b,c){var d=this.f[c.pointerId];if(d){var e=d.out,f=d.Oa;Z(this.a,Ae,c,b);e&&f!==c.target&&(e.relatedTarget=c.target,c.relatedTarget=f,e.target=f,c.target?(De(this.a,e,b),Ce(this.a,c,b)):(c.target=f,c.relatedTarget=null,this.ra(b,c)));d.out=c;d.Oa=c.target}};q.qc=function(b){Le(this,b);Ke(this,b,this.tc)};q.tc=function(b,c){Z(this.a,Be,c,b);this.a.out(c,b);var d=this.a;c.bubbles=!1;Z(d,Oe,c,b);delete this.f[c.pointerId];c.isPrimary&&(this.b=void 0,this.c=K.setTimeout(this.Ra.bind(this),200))};q.pc=function(b){Ke(this,b,this.ra)};q.ra=function(b,c){Z(this.a,ye,c,b);this.a.out(c,b);var d=this.a;c.bubbles=!1;Z(d,Oe,c,b);delete this.f[c.pointerId];c.isPrimary&&(this.b=void 0,this.c=K.setTimeout(this.Ra.bind(this),200))};function Le(b,c){var d=b.u.b,e=c.changedTouches[0];if(b.b===e.identifier){var f=[e.clientX,e.clientY];d.push(f);K.setTimeout(function(){ab(d,f)},2500)}};function Pe(b){Sa.call(this);this.g=b;this.f={};this.c={};this.a=[];re?Qe(this,new Ge(this)):se?Qe(this,new Ee(this)):(b=new ue(this),Qe(this,b),qe&&Qe(this,new Ie(this,b)));b=this.a.length;for(var c,d=0;d<b;d++)c=this.a[d],Re(this,Object.keys(c.j))}J(Pe,Sa);function Qe(b,c){var d=Object.keys(c.j);d&&(d.forEach(function(b){var d=c.j[b];d&&(this.c[b]=d.bind(c))},b),b.a.push(c))}Pe.prototype.b=function(b){var c=this.c[b.type];c&&c(b)};function Re(b,c){c.forEach(function(b){P(this.g,b,this.b,this)},b)}function Se(b,c){c.forEach(function(b){Na(this.g,b,this.b,this)},b)}function xe(b,c){for(var d={},e,f=0,g=Te.length;f<g;f++)e=Te[f][0],d[e]=b[e]||c[e]||Te[f][1];return d}Pe.prototype.out=function(b,c){b.bubbles=!0;Z(this,Ue,b,c)};function De(b,c,d){b.out(c,d);var e=c.relatedTarget;e&&dd(c.target,e)||(c.bubbles=!1,Z(b,Oe,c,d))}
function Ce(b,c,d){c.bubbles=!0;Z(b,Me,c,d);var e=c.relatedTarget;e&&dd(c.target,e)||(c.bubbles=!1,Z(b,Ne,c,d))}function Z(b,c,d,e){R(b,new ce(c,e,d))}function He(b,c){R(b,new ce(c.type,c,c))}Pe.prototype.C=function(){for(var b=this.a.length,c,d=0;d<b;d++)c=this.a[d],Se(this,Object.keys(c.j));Pe.L.C.call(this)};var Ae="pointermove",ze="pointerdown",Be="pointerup",Me="pointerover",Ue="pointerout",Ne="pointerenter",Oe="pointerleave",ye="pointercancel",Te=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]];function Ve(b,c,d,e,f){od.call(this,b,c,f);this.originalEvent=d;b=c.a.getBoundingClientRect();d=d.changedTouches?d.changedTouches[0]:d;this.pixel=[d.clientX-b.left,d.clientY-b.top];this.coordinate=c.da(this.pixel);this.dragging=void 0!==e?e:!1}J(Ve,od);Ve.prototype.preventDefault=function(){Ve.L.preventDefault.call(this);this.originalEvent.preventDefault()};Ve.prototype.stopPropagation=function(){Ve.L.stopPropagation.call(this);this.originalEvent.stopPropagation()};function We(b,c,d,e,f){Ve.call(this,b,c,d.a,e,f);this.a=d}J(We,Ve);function Xe(b){Sa.call(this);this.b=b;this.h=0;this.v=!1;this.c=[];this.f=null;b=this.b.a;this.l=0;this.I={};this.g=new Pe(b);this.a=null;this.i=P(this.g,ze,this.Ab,this);this.o=P(this.g,Ae,this.lc,this)}J(Xe,Sa);function Ye(b,c){var d;d=new We(Ze,b.b,c);R(b,d);0!==b.h?(K.clearTimeout(b.h),b.h=0,d=new We($e,b.b,c),R(b,d)):b.h=K.setTimeout(function(){this.h=0;var b=new We(af,this.b,c);R(this,b)}.bind(b),250)}
function bf(b,c){c.type==cf||c.type==df?delete b.I[c.pointerId]:c.type==ef&&(b.I[c.pointerId]=!0);b.l=Object.keys(b.I).length}q=Xe.prototype;q.Ma=function(b){bf(this,b);var c=new We(cf,this.b,b);R(this,c);!this.v&&0===b.button&&Ye(this,this.f);0===this.l&&(this.c.forEach(N),this.c.length=0,this.v=!1,this.f=null,Pa(this.a),this.a=null)};q.Ab=function(b){bf(this,b);var c=new We(ef,this.b,b);R(this,c);this.f=b;0===this.c.length&&(this.a=new Pe(document),this.c.push(P(this.a,ff,this.Bb,this),P(this.a,cf,this.Ma,this),P(this.g,df,this.Ma,this)))};q.Bb=function(b){if(b.clientX!=this.f.clientX||b.clientY!=this.f.clientY){this.v=!0;var c=new We(gf,this.b,b,this.v);R(this,c)}b.preventDefault()};q.lc=function(b){R(this,new We(b.type,this.b,b,!(!this.f||b.clientX==this.f.clientX&&b.clientY==this.f.clientY)))};q.C=function(){this.o&&(N(this.o),this.o=null);this.i&&(N(this.i),this.i=null);this.c.forEach(N);this.c.length=0;this.a&&(Pa(this.a),this.a=null);this.g&&(Pa(this.g),this.g=null);Xe.L.C.call(this)};var af="singleclick",Ze="click",$e="dblclick",gf="pointerdrag",ff="pointermove",ef="pointerdown",cf="pointerup",df="pointercancel",hf={Fc:af,uc:Ze,vc:$e,yc:gf,Bc:ff,xc:ef,Ec:cf,Dc:"pointerover",Cc:"pointerout",zc:"pointerenter",Ac:"pointerleave",wc:df};function jf(b){S.call(this);var c=Ea({},b);c.opacity=void 0!==b.opacity?b.opacity:1;c.visible=void 0!==b.visible?b.visible:!0;c.zIndex=void 0!==b.zIndex?b.zIndex:0;c.maxResolution=void 0!==b.maxResolution?b.maxResolution:Infinity;c.minResolution=void 0!==b.minResolution?b.minResolution:0;Wa(this,c)}J(jf,S);function kf(b){var c=b.get("opacity"),d=b.Ia(),e=b.get("visible"),f=b.a(),g=b.get("zIndex"),h=b.get("maxResolution"),k=b.get("minResolution");return{layer:b,opacity:wa(c,0,1),Sa:d,visible:e,Lb:!0,extent:f,zIndex:g,maxResolution:h,minResolution:Math.max(k,0)}}jf.prototype.a=function(){return this.get("extent")};jf.prototype.h=function(b){this.set("visible",b)};function lf(){};function mf(b,c,d,e,f,g){Q.call(this,b,c);this.vectorContext=d;this.frameState=e;this.context=f;this.glContext=g}J(mf,Q);function nf(b){var c=Ea({},b);delete c.source;jf.call(this,c);this.g=this.c=this.b=null;b.map&&this.setMap(b.map);P(this,Ya("source"),this.Eb,this);this.set("source",b.source?b.source:null)}J(nf,jf);q=nf.prototype;q.va=function(b){b=b?b:[];b.push(kf(this));return b};q.X=function(){return this.get("source")||null};q.Ia=function(){var b=this.X();return b?b.B():"undefined"};q.cc=function(){this.f()};q.Eb=function(){this.g&&(N(this.g),this.g=null);var b=this.X();b&&(this.g=P(b,"change",this.cc,this));this.f()};q.setMap=function(b){this.b&&(N(this.b),this.b=null);b||this.f();this.c&&(N(this.c),this.c=null);b&&(this.b=P(b,"precompose",function(b){var d=kf(this);d.Lb=!1;d.zIndex=Infinity;b.frameState.layerStatesArray.push(d);b.frameState.layerStates[y(this)]=d},this),this.c=P(this,"change",b.render,b),this.f())};function of(b,c,d,e,f,g,h,k){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;0===c&&0===d||Yb(b,c,d);1==e&&1==f||Xb(b,b[0]*e,b[1]*e,b[2]*e,b[3]*e,b[4]*f,b[5]*f,b[6]*f,b[7]*f,1*b[8],1*b[9],1*b[10],1*b[11],b[12],b[13],b[14],b[15]);if(0!==g){c=b[0];d=b[1];e=b[2];f=b[3];var l=b[4],m=b[5],n=b[6],p=b[7],r=Math.cos(g);g=Math.sin(g);b[0]=c*r+l*g;b[1]=d*r+m*g;b[2]=e*r+n*g;b[3]=f*r+p*g;b[4]=c*-g+l*r;b[5]=d*-g+m*r;b[6]=e*-g+n*r;b[7]=f*-g+
p*r}0===h&&0===k||Yb(b,h,k);return b}function pf(b,c,d){var e=b[1],f=b[5],g=b[13],h=c[0];c=c[1];d[0]=b[0]*h+b[4]*c+b[12];d[1]=e*h+f*c+g;return d};function qf(b){Ua.call(this);this.b=b}J(qf,Ua);function rf(b,c,d){return function(e,f){return Rd(b,c,e,f,function(b){d[e]||(d[e]={});d[e][b.G.toString()]=b})}}function sf(b,c){c.Na()&&b.postRenderFunctions.push(function(b,c,f){c=y(b).toString();b.$(f.viewState.projection,f.usedTiles[c])}.bind(null,c))}function tf(b,c){var d=c.S;void 0!==d&&("string"===typeof d?b.logos[d]="":da(d)&&(b.logos[d.src]=d.href))}
function uf(b,c,d,e){c=y(c).toString();d=d.toString();c in b?d in b[c]?(b=b[c][d],e.f<b.f&&(b.f=e.f),e.a>b.a&&(b.a=e.a),e.c<b.c&&(b.c=e.c),e.b>b.b&&(b.b=e.b)):b[c][d]=e:(b[c]={},b[c][d]=e)}function vf(b,c,d){return[c*(Math.round(b[0]/c)+d[0]%2/2),c*(Math.round(b[1]/c)+d[1]%2/2)]}
function wf(b,c,d,e,f,g,h,k){var l=y(c).toString();l in b.wantedTiles||(b.wantedTiles[l]={});var m=b.wantedTiles[l];b=b.tileQueue;var n=d.minZoom,p,r,w,u,t,A;for(A=h;A>=n;--A)for(r=Ed(d,g,A,r),w=d.s(A),u=r.f;u<=r.a;++u)for(t=r.c;t<=r.b;++t)h-A<=k?(p=xf(c,A,u,t,e,f),0==p.B()&&(m[p.G.toString()]=!0,p.getKey()in b.b||b.u([p,l,Id(d,p.G),w]))):c.Ua(A,u,t,f)};function yf(){this.a={};this.f=0}yf.f=function(){return yf.a?yf.a:yf.a=new yf};yf.prototype.clear=function(){this.a={};this.f=0};yf.prototype.get=function(b,c,d){b=c+":"+b+":"+(d?zc(d):"null");return b in this.a?this.a[b]:null};yf.prototype.set=function(b,c,d,e){this.a[c+":"+b+":"+(d?zc(d):"null")]=e;++this.f};function zf(b,c){this.b=c;this.f={};this.j={}}J(zf,Oa);function Af(b){var c=b.viewState,d=b.coordinateToPixelMatrix;of(d,b.size[0]/2,b.size[1]/2,1/c.resolution,-1/c.resolution,-c.rotation,-c.center[0],-c.center[1]);b=b.pixelToCoordinateMatrix;var c=d[0],e=d[1],f=d[2],g=d[3],h=d[4],k=d[5],l=d[6],m=d[7],n=d[8],p=d[9],r=d[10],w=d[11],u=d[12],t=d[13],A=d[14],d=d[15],O=c*k-e*h,x=c*l-f*h,B=c*m-g*h,H=e*l-f*k,E=e*m-g*k,C=f*m-g*l,T=n*t-p*u,L=n*A-r*u,z=n*d-w*u,D=p*A-r*t,M=p*d-w*t,G=r*d-w*A,F=O*G-x*M+B*D+H*z-E*L+C*T;0!=F&&(F=1/F,b[0]=(k*G-l*M+m*D)*F,b[1]=(-e*G+
f*M-g*D)*F,b[2]=(t*C-A*E+d*H)*F,b[3]=(-p*C+r*E-w*H)*F,b[4]=(-h*G+l*z-m*L)*F,b[5]=(c*G-f*z+g*L)*F,b[6]=(-u*C+A*B-d*x)*F,b[7]=(n*C-r*B+w*x)*F,b[8]=(h*M-k*z+m*T)*F,b[9]=(-c*M+e*z-g*T)*F,b[10]=(u*E-t*B+d*O)*F,b[11]=(-n*E+p*B-w*O)*F,b[12]=(-h*D+k*L-l*T)*F,b[13]=(c*D-e*L+f*T)*F,b[14]=(-u*H+t*x-A*O)*F,b[15]=(n*H-p*x+r*O)*F)}zf.prototype.C=function(){for(var b in this.f)Pa(this.f[b])};function Bf(){var b=yf.f();if(32<b.f){var c=0,d,e;for(d in b.a)e=b.a[d],0!==(c++&3)||Ta(e)||(delete b.a[d],--b.f)}}
function Cf(b,c){var d=y(c).toString();if(d in b.f)return b.f[d];var e=b.h(c);b.f[d]=e;b.j[d]=P(e,"change",b.H,b);return e}zf.prototype.H=function(){this.b.render()};zf.prototype.u=ja;zf.prototype.i=function(b,c){for(var d in this.f)if(!(c&&d in c.layerStates)){var e=d,f=this.f[e];delete this.f[e];N(this.j[e]);delete this.j[e];Pa(f)}};function Df(b,c){for(var d in b.f)if(!(d in c.layerStates)){c.postRenderFunctions.push(b.i.bind(b));break}}function cb(b,c){return b.zIndex-c.zIndex};function Ef(b,c){this.H=b;this.g=c;this.a=[];this.f=[];this.b={}}Ef.prototype.clear=function(){this.a.length=0;this.f.length=0;Fa(this.b)};Ef.prototype.u=function(b){var c=this.H(b);return Infinity!=c?(this.a.push(b),this.f.push(c),this.b[this.g(b)]=!0,Ff(this,0,this.a.length-1),!0):!1};function Gf(b,c){for(var d=b.a,e=b.f,f=d.length,g=d[c],h=e[c],k=c;c<f>>1;){var l=2*c+1,m=2*c+2,l=m<f&&e[m]<e[l]?m:l;d[c]=d[l];e[c]=e[l];c=l}d[c]=g;e[c]=h;Ff(b,k,c)}
function Ff(b,c,d){var e=b.a;b=b.f;for(var f=e[d],g=b[d];d>c;){var h=d-1>>1;if(b[h]>g)e[d]=e[h],b[d]=b[h],d=h;else break}e[d]=f;b[d]=g};function Hf(b,c){Ef.call(this,function(c){return b.apply(null,c)},function(b){return b[0].getKey()});this.v=c;this.j=0;this.c={}}J(Hf,Ef);Hf.prototype.u=function(b){var c=Hf.L.u.call(this,b);c&&P(b[0],"change",this.h,this);return c};Hf.prototype.h=function(b){b=b.target;var c=b.B();if(2===c||3===c||4===c||5===c)Na(b,"change",this.h,this),b=b.getKey(),b in this.c&&(delete this.c[b],--this.j),this.v()};function If(){this.a=[];this.f=this.b=0}function Jf(b,c){var d=b.f,e=.05-d,f=Math.log(.05/b.f)/-.005;return lc({source:c,duration:f,easing:function(b){return d*(Math.exp(-.005*b*f)-1)/e}})};function Kf(b){S.call(this);this.w=null;this.set("active",!0);this.handleEvent=b.handleEvent}J(Kf,S);Kf.prototype.setMap=function(b){this.w=b};function Lf(b,c,d,e,f){if(void 0!==d){var g=fc(c),h=c.P();void 0!==g&&h&&f&&0<f&&(b.K(mc({rotation:g,duration:f,easing:ic})),e&&b.K(lc({source:h,duration:f,easing:ic})));c.rotate(d,e)}}function Mf(b,c,d,e,f){var g=c.s();d=c.constrainResolution(g,d,0);Nf(b,c,d,e,f)}
function Nf(b,c,d,e,f){if(d){var g=c.s(),h=c.P();void 0!==g&&h&&d!==g&&f&&0<f&&(b.K(nc({resolution:g,duration:f,easing:ic})),e&&b.K(lc({source:h,duration:f,easing:ic})));if(e){var k;b=c.P();f=c.s();void 0!==b&&void 0!==f&&(k=[e[0]-d*(e[0]-b[0])/f,e[1]-d*(e[1]-b[1])/f]);c.U(k)}c.V(d)}};function Of(b){b=b?b:{};this.a=b.delta?b.delta:1;Kf.call(this,{handleEvent:Pf});this.b=void 0!==b.duration?b.duration:250}J(Of,Kf);function Pf(b){var c=!1,d=b.originalEvent;if(b.type==$e){var c=b.map,e=b.coordinate,d=d.shiftKey?-this.a:this.a,f=Y(c);Mf(c,f,d,e,this.b);b.preventDefault();c=!0}return!c};function Qf(b){b=b.originalEvent;return b.altKey&&!(b.metaKey||b.ctrlKey)&&b.shiftKey}function Rf(b){b=b.originalEvent;return 0==b.button&&!(Kc&&ne&&b.ctrlKey)}function Sf(b){b=b.originalEvent;return!b.altKey&&!(b.metaKey||b.ctrlKey)&&!b.shiftKey}function Tf(b){b=b.originalEvent;return!b.altKey&&!(b.metaKey||b.ctrlKey)&&b.shiftKey}function Uf(b){b=b.originalEvent.target.tagName;return"INPUT"!==b&&"SELECT"!==b&&"TEXTAREA"!==b}function Vf(b){return"mouse"==b.a.pointerType};function Wf(b){b=b?b:{};Kf.call(this,{handleEvent:b.handleEvent?b.handleEvent:Xf});this.O=b.handleDownEvent?b.handleDownEvent:yb;this.J=b.handleDragEvent?b.handleDragEvent:ja;this.N=b.handleMoveEvent?b.handleMoveEvent:ja;this.S=b.handleUpEvent?b.handleUpEvent:yb;this.c=!1;this.o={};this.a=[]}J(Wf,Kf);function Yf(b){for(var c=b.length,d=0,e=0,f=0;f<c;f++)d+=b[f].clientX,e+=b[f].clientY;return[d/c,e/c]}
function Xf(b){if(!(b instanceof We))return!0;var c=!1,d=b.type;if(d===ef||d===gf||d===cf){var d=b.a,e=d.pointerId.toString();b.type==cf?delete this.o[e]:b.type==ef?this.o[e]=d:e in this.o&&(this.o[e]=d);var d=this.o,e=[],f;for(f in d)e.push(d[f]);this.a=e}this.c&&(b.type==gf?this.J(b):b.type==cf&&(this.c=this.S(b)));b.type==ef?(this.c=b=this.O(b),c=this.i(b)):b.type==ff&&this.N(b);return!c}Wf.prototype.i=function(b){return b};function Zf(b){Wf.call(this,{handleDownEvent:$f,handleDragEvent:ag,handleUpEvent:bg});b=b?b:{};this.b=b.kinetic;this.g=this.h=null;this.A=b.condition?b.condition:Sf;this.l=!1}J(Zf,Wf);function ag(b){var c=Yf(this.a);this.b&&this.b.a.push(c[0],c[1],Date.now());if(this.g){var d=this.g[0]-c[0],e=c[1]-this.g[1];b=b.map;var f=Y(b),g=f.B(),e=d=[d,e],h=g.resolution;e[0]*=h;e[1]*=h;kb(d,g.rotation);jb(d,g.center);d=f.b.center(d);b.render();f.U(d)}this.g=c}
function bg(b){b=b.map;var c=Y(b);if(0===this.a.length){var d;if(d=!this.l&&this.b)if(d=this.b,6>d.a.length)d=!1;else{var e=Date.now()-100,f=d.a.length-3;if(d.a[f+2]<e)d=!1;else{for(var g=f-3;0<g&&d.a[g+2]>e;)g-=3;var e=d.a[f+2]-d.a[g+2],h=d.a[f]-d.a[g],f=d.a[f+1]-d.a[g+1];d.b=Math.atan2(f,h);d.f=Math.sqrt(h*h+f*f)/e;d=.05<d.f}}d&&(d=(.05-this.b.f)/-.005,f=this.b.b,g=c.P(),this.h=Jf(this.b,g),b.K(this.h),g=cg(b,g),d=b.da([g[0]-d*Math.cos(f),g[1]-d*Math.sin(f)]),d=c.b.center(d),c.U(d));hc(c,-1);b.render();
return!1}this.g=null;return!0}function $f(b){if(0<this.a.length&&this.A(b)){var c=b.map,d=Y(c);this.g=null;this.c||hc(d,1);c.render();this.h&&ab(c.A,this.h)&&(d.U(b.frameState.viewState.center),this.h=null);this.b&&(b=this.b,b.a.length=0,b.b=0,b.f=0);this.l=1<this.a.length;return!0}return!1}Zf.prototype.i=yb;function dg(b){b=b?b:{};Wf.call(this,{handleDownEvent:eg,handleDragEvent:fg,handleUpEvent:gg});this.g=b.condition?b.condition:Qf;this.b=void 0;this.h=void 0!==b.duration?b.duration:250}J(dg,Wf);function fg(b){if(Vf(b)){var c=b.map,d=c.pa();b=b.pixel;d=Math.atan2(d[1]/2-b[1],b[0]-d[0]/2);if(void 0!==this.b){b=d-this.b;var e=Y(c),f=fc(e);c.render();Lf(c,e,f-b)}this.b=d}}
function gg(b){if(!Vf(b))return!0;b=b.map;var c=Y(b);hc(c,-1);var d=fc(c),e=this.h,d=c.constrainRotation(d,0);Lf(b,c,d,void 0,e);return!1}function eg(b){return Vf(b)&&Rf(b)&&this.g(b)?(b=b.map,hc(Y(b),1),b.render(),this.b=void 0,!0):!1}dg.prototype.i=yb;function hg(b){this.c=null;this.f=document.createElement("div");this.f.style.position="absolute";this.f.className="ol-box "+b;this.b=this.j=this.a=null}J(hg,Oa);hg.prototype.C=function(){this.setMap(null)};function ig(b){var c=b.j,d=b.b;b=b.f.style;b.left=Math.min(c[0],d[0])+"px";b.top=Math.min(c[1],d[1])+"px";b.width=Math.abs(d[0]-c[0])+"px";b.height=Math.abs(d[1]-c[1])+"px"}
hg.prototype.setMap=function(b){if(this.a){this.a.w.removeChild(this.f);var c=this.f.style;c.left=c.top=c.width=c.height="inherit"}(this.a=b)&&this.a.w.appendChild(this.f)};function jg(b){var c=b.j,d=b.b,c=[c,[c[0],d[1]],d,[d[0],c[1]]].map(b.a.da,b.a);c[4]=c[0].slice();b.c?bc(b.c,[c]):b.c=new ac([c])}hg.prototype.h=function(){return this.c};function kg(b,c,d){Q.call(this,b);this.coordinate=c;this.mapBrowserEvent=d}J(kg,Q);function lg(b){Wf.call(this,{handleDownEvent:mg,handleDragEvent:ng,handleUpEvent:og});b=b?b:{};this.b=new hg(b.className||"ol-dragbox");this.g=null;this.Y=b.condition?b.condition:xb;this.D=b.boxEndCondition?b.boxEndCondition:pg}J(lg,Wf);function pg(b,c,d){b=d[0]-c[0];c=d[1]-c[1];return 64<=b*b+c*c}
function ng(b){if(Vf(b)){var c=this.b,d=b.pixel;c.j=this.g;c.b=d;jg(c);ig(c);R(this,new kg("boxdrag",b.coordinate,b))}}lg.prototype.h=function(){return this.b.h()};lg.prototype.A=ja;function og(b){if(!Vf(b))return!0;this.b.setMap(null);this.D(b,this.g,b.pixel)&&(this.A(b),R(this,new kg("boxend",b.coordinate,b)));return!1}
function mg(b){if(Vf(b)&&Rf(b)&&this.Y(b)){this.g=b.pixel;this.b.setMap(b.map);var c=this.b,d=this.g;c.j=this.g;c.b=d;jg(c);ig(c);R(this,new kg("boxstart",b.coordinate,b));return!0}return!1};function qg(b){b=b?b:{};var c=b.condition?b.condition:Tf;this.l=void 0!==b.duration?b.duration:200;this.Z=void 0!==b.out?b.out:!1;lg.call(this,{condition:c,className:b.className||"ol-dragzoom"})}J(qg,lg);qg.prototype.A=function(){var b=this.w,c=Y(b),d=b.pa(),e=this.h().a();if(this.Z){var f;f=c.P();var g=c.s(),h=fc(c);f=sb(f,g,h,d);var e=[cg(b,rb(e)),cg(b,[e[2],e[3]])],g=ob(Infinity,Infinity,-Infinity,-Infinity,void 0),k,h=0;for(k=e.length;h<k;++h)nb(g,e[h]);g=1/dc(g,d);e=(f[2]-f[0])/2*(g-1);g=(f[3]-f[1])/2*(g-1);f[0]-=e;f[2]+=e;f[1]-=g;f[3]+=g;e=f}d=c.constrainResolution(dc(e,d));f=c.s();g=c.P();b.K(nc({resolution:f,duration:this.l,easing:ic}));b.K(lc({source:g,duration:this.l,easing:ic}));c.U([(e[0]+
e[2])/2,(e[1]+e[3])/2]);c.V(d)};function rg(b){Kf.call(this,{handleEvent:sg});b=b||{};this.a=function(b){return Sf(b)&&Uf(b)};this.b=void 0!==b.condition?b.condition:this.a;this.c=void 0!==b.duration?b.duration:100;this.g=void 0!==b.pixelDelta?b.pixelDelta:128}J(rg,Kf);
function sg(b){var c=!1;if("keydown"==b.type){var d=b.originalEvent.keyCode;if(this.b(b)&&(40==d||37==d||39==d||38==d)){var e=b.map,c=Y(e),f=c.s()*this.g,g=0,h=0;40==d?h=-f:37==d?g=-f:39==d?g=f:h=f;d=[g,h];kb(d,fc(c));f=this.c;if(g=c.P())f&&0<f&&e.K(lc({source:g,duration:f,easing:kc})),e=c.b.center([g[0]+d[0],g[1]+d[1]]),c.U(e);b.preventDefault();c=!0}}return!c};function tg(b){Kf.call(this,{handleEvent:ug});b=b?b:{};this.b=b.condition?b.condition:Uf;this.a=b.delta?b.delta:1;this.c=void 0!==b.duration?b.duration:100}J(tg,Kf);function ug(b){var c=!1;if("keydown"==b.type||"keypress"==b.type){var d=b.originalEvent.charCode;if(this.b(b)&&(43==d||45==d)){c=b.map;d=43==d?this.a:-this.a;c.render();var e=Y(c);Mf(c,e,d,void 0,this.c);b.preventDefault();c=!0}}return!c};function vg(b){Kf.call(this,{handleEvent:wg});b=b||{};this.b=0;this.o=void 0!==b.duration?b.duration:250;this.h=void 0!==b.useAnchor?b.useAnchor:!0;this.a=null;this.g=this.c=void 0}J(vg,Kf);function wg(b){var c=!1;if("wheel"==b.type||"mousewheel"==b.type){var c=b.map,d=b.originalEvent;this.h&&(this.a=b.coordinate);var e;"wheel"==b.type?(e=d.deltaY,le&&d.deltaMode===K.WheelEvent.DOM_DELTA_PIXEL&&(e/=oe),d.deltaMode===K.WheelEvent.DOM_DELTA_LINE&&(e*=40)):"mousewheel"==b.type&&(e=-d.wheelDeltaY,me&&(e/=3));this.b+=e;void 0===this.c&&(this.c=Date.now());e=Math.max(80-(Date.now()-this.c),0);K.clearTimeout(this.g);this.g=K.setTimeout(this.i.bind(this,c),e);b.preventDefault();c=!0}return!c}
vg.prototype.i=function(b){var c=wa(this.b,-1,1),d=Y(b);b.render();Mf(b,d,-c,this.a,this.o);this.b=0;this.a=null;this.g=this.c=void 0};vg.prototype.l=function(b){this.h=b;b||(this.a=null)};function xg(b){Wf.call(this,{handleDownEvent:yg,handleDragEvent:zg,handleUpEvent:Ag});b=b||{};this.g=null;this.h=void 0;this.b=!1;this.l=0;this.D=void 0!==b.threshold?b.threshold:.3;this.A=void 0!==b.duration?b.duration:250}J(xg,Wf);function zg(b){var c=0,d=this.a[0],e=this.a[1],d=Math.atan2(e.clientY-d.clientY,e.clientX-d.clientX);void 0!==this.h&&(c=d-this.h,this.l+=c,!this.b&&Math.abs(this.l)>this.D&&(this.b=!0));this.h=d;b=b.map;d=b.a.getBoundingClientRect();e=Yf(this.a);e[0]-=d.left;e[1]-=d.top;this.g=b.da(e);this.b&&(d=Y(b),e=fc(d),b.render(),Lf(b,d,e+c,this.g))}
function Ag(b){if(2>this.a.length){b=b.map;var c=Y(b);hc(c,-1);if(this.b){var d=fc(c),e=this.g,f=this.A,d=c.constrainRotation(d,0);Lf(b,c,d,e,f)}return!1}return!0}function yg(b){return 2<=this.a.length?(b=b.map,this.g=null,this.h=void 0,this.b=!1,this.l=0,this.c||hc(Y(b),1),b.render(),!0):!1}xg.prototype.i=yb;function Bg(b){Wf.call(this,{handleDownEvent:Cg,handleDragEvent:Dg,handleUpEvent:Eg});b=b?b:{};this.g=null;this.l=void 0!==b.duration?b.duration:400;this.b=void 0;this.h=1}J(Bg,Wf);function Dg(b){var c=1,d=this.a[0],e=this.a[1],f=d.clientX-e.clientX,d=d.clientY-e.clientY,f=Math.sqrt(f*f+d*d);void 0!==this.b&&(c=this.b/f);this.b=f;1!=c&&(this.h=c);b=b.map;var f=Y(b),d=f.s(),e=b.a.getBoundingClientRect(),g=Yf(this.a);g[0]-=e.left;g[1]-=e.top;this.g=b.da(g);b.render();Nf(b,f,d*c,this.g)}
function Eg(b){if(2>this.a.length){b=b.map;var c=Y(b);hc(c,-1);var d=c.s(),e=this.g,f=this.l,d=c.constrainResolution(d,0,this.h-1);Nf(b,c,d,e,f);return!1}return!0}function Cg(b){return 2<=this.a.length?(b=b.map,this.g=null,this.b=void 0,this.h=1,this.c||hc(Y(b),1),b.render(),!0):!1}Bg.prototype.i=yb;function Fg(b){b=b?b:{};var c=new tc,d=new If;(void 0!==b.altShiftDragRotate?b.altShiftDragRotate:1)&&c.push(new dg);(void 0!==b.doubleClickZoom?b.doubleClickZoom:1)&&c.push(new Of({delta:b.zoomDelta,duration:b.zoomDuration}));(void 0!==b.dragPan?b.dragPan:1)&&c.push(new Zf({kinetic:d}));(void 0!==b.pinchRotate?b.pinchRotate:1)&&c.push(new xg);(void 0!==b.pinchZoom?b.pinchZoom:1)&&c.push(new Bg({duration:b.zoomDuration}));if(void 0!==b.keyboard?b.keyboard:1)c.push(new rg),c.push(new tg({delta:b.zoomDelta,duration:b.zoomDuration}));(void 0!==b.mouseWheelZoom?b.mouseWheelZoom:1)&&c.push(new vg({duration:b.zoomDuration}));(void 0!==b.shiftDragZoom?b.shiftDragZoom:1)&&c.push(new qg({duration:b.zoomDuration}));return c};function Gg(b){var c=b||{};b=Ea({},c);delete b.layers;c=c.layers;jf.call(this,b);this.c=[];this.b={};P(this,Ya("layers"),this.yb,this);c?Array.isArray(c)&&(c=new tc(c.slice())):c=new tc;this.set("layers",c)}J(Gg,jf);q=Gg.prototype;q.oa=function(){this.get("visible")&&this.f()};q.yb=function(){this.c.forEach(N);this.c.length=0;var b=this.get("layers");this.c.push(P(b,"add",this.xb,this),P(b,"remove",this.zb,this));for(var c in this.b)this.b[c].forEach(N);Fa(this.b);var b=b.a,d,e;c=0;for(d=b.length;c<d;c++)e=b[c],this.b[y(e).toString()]=[P(e,"propertychange",this.oa,this),P(e,"change",this.oa,this)];this.f()};q.xb=function(b){b=b.element;var c=y(b).toString();this.b[c]=[P(b,"propertychange",this.oa,this),P(b,"change",this.oa,this)];this.f()};q.zb=function(b){b=y(b.element).toString();this.b[b].forEach(N);delete this.b[b];this.f()};q.va=function(b){var c=void 0!==b?b:[],d=c.length;wc(this.get("layers"),function(b){b.va(c)});b=kf(this);var e,f;for(e=c.length;d<e;d++)f=c[d],f.opacity*=b.opacity,f.visible=f.visible&&b.visible,f.maxResolution=Math.min(f.maxResolution,b.maxResolution),f.minResolution=Math.max(f.minResolution,b.minResolution),void 0!==b.extent&&(f.extent=void 0!==f.extent?tb(f.extent,b.extent):b.extent);return c};q.Ia=function(){return"ready"};function Hg(b){Db.call(this,{code:b,units:"m",extent:Ig,global:!0,worldExtent:Jg})}J(Hg,Db);Hg.prototype.getPointResolution=function(b,c){return b/xa(c[1]/6378137)};var Kg=6378137*Math.PI,Ig=[-Kg,-Kg,Kg,Kg],Jg=[-180,-85,180,85],Lg="EPSG:3857 EPSG:102100 EPSG:102113 EPSG:900913 urn:ogc:def:crs:EPSG:6.18:3:3857 urn:ogc:def:crs:EPSG::3857 http://www.opengis.net/gml/srs/epsg.xml#3857".split(" ").map(function(b){return new Hg(b)});function Mg(b,c,d){var e=b.length;d=1<d?d:2;void 0===c&&(2<d?c=b.slice():c=Array(e));for(var f=0;f<e;f+=d)c[f]=6378137*Math.PI*b[f]/180,c[f+1]=6378137*Math.log(Math.tan(Math.PI*(b[f+1]+90)/360));return c}function Ng(b,c,d){var e=b.length;d=1<d?d:2;void 0===c&&(2<d?c=b.slice():c=Array(e));for(var f=0;f<e;f+=d)c[f]=180*b[f]/(6378137*Math.PI),c[f+1]=360*Math.atan(Math.exp(b[f+1]/6378137))/Math.PI-90;return c};var Og=new zb(6378137);function Pg(b,c){Db.call(this,{code:b,units:"degrees",extent:Qg,axisOrientation:c,global:!0,metersPerUnit:Rg,worldExtent:Qg})}J(Pg,Db);Pg.prototype.getPointResolution=function(b){return b};
var Qg=[-180,-90,180,90],Rg=Math.PI*Og.radius/180,Sg=[new Pg("CRS:84"),new Pg("EPSG:4326","neu"),new Pg("urn:ogc:def:crs:EPSG::4326","neu"),new Pg("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new Pg("urn:ogc:def:crs:OGC:1.3:CRS84"),new Pg("urn:ogc:def:crs:OGC:2:84"),new Pg("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Pg("urn:x-ogc:def:crs:EPSG:4326","neu")];function Tg(b){b=b?b:{};var c=Ea({},b);delete c.preload;delete c.useInterimTilesOnError;nf.call(this,c);this.set("preload",void 0!==b.preload?b.preload:0);this.set("useInterimTilesOnError",void 0!==b.useInterimTilesOnError?b.useInterimTilesOnError:!0)}J(Tg,nf);function Ug(b,c,d,e){0!==c&&(b.translate(d,e),b.rotate(c),b.translate(-d,-e))};function Vg(){Wb()}J(Vg,lf);function Wg(b){qf.call(this,b);this.g=Wb()}J(Wg,qf);Wg.prototype.a=function(b,c,d){Xg(this,"precompose",d,b,void 0);var e=this.W();if(e){var f=c.extent,g=void 0!==f;if(g){var h=b.pixelRatio,k=b.size[0]*h,l=b.size[1]*h,m=b.viewState.rotation,n=vb(f),p=[f[2],f[3]],r=[f[2],f[1]],f=rb(f);pf(b.coordinateToPixelMatrix,n,n);pf(b.coordinateToPixelMatrix,p,p);pf(b.coordinateToPixelMatrix,r,r);pf(b.coordinateToPixelMatrix,f,f);d.save();Ug(d,-m,k/2,l/2);d.beginPath();d.moveTo(n[0]*h,n[1]*h);d.lineTo(p[0]*h,p[1]*h);d.lineTo(r[0]*h,r[1]*h);d.lineTo(f[0]*h,f[1]*h);d.clip();Ug(d,m,k/2,l/2)}h=this.w();k=d.globalAlpha;d.globalAlpha=c.opacity;d.drawImage(e,0,0,+e.width,+e.height,Math.round(h[12]),Math.round(h[13]),Math.round(e.width*h[0]),Math.round(e.height*h[5]));d.globalAlpha=k;g&&d.restore()}Xg(this,"postcompose",d,b,void 0)};function Xg(b,c,d,e,f){var g=b.b;if(Ta(g,c)){var h=e.size[0]*e.pixelRatio,k=e.size[1]*e.pixelRatio,l=e.viewState.rotation;Ug(d,-l,h/2,k/2);void 0!==f||Yg(b,e);b=new Vg;R(g,new mf(c,g,b,e,d,null));Ug(d,l,h/2,k/2)}}
function Yg(b,c){var d=c.viewState,e=c.pixelRatio;return of(b.g,e*c.size[0]/2,e*c.size[1]/2,e/d.resolution,-e/d.resolution,-d.rotation,-d.center[0]+0,-d.center[1])};var Zg,$g=v.navigator,ah=v.chrome,bh=-1<$g.userAgent.indexOf("OPR"),ch=-1<$g.userAgent.indexOf("Edge");Zg=!(!$g.userAgent.match("CriOS")&&null!==ah&&void 0!==ah&&"Google Inc."===$g.vendor&&0==bh&&0==ch);function dh(b,c,d,e){b=d-b;c=e-c;var f=Math.sqrt(b*b+c*c);return[Math.round(d+b/f),Math.round(e+c/f)]}
function eh(b,c,d,e,f,g,h,k,l,m,n){var p=ge(Math.round(d*b),Math.round(d*c));if(0===l.length)return p.canvas;p.scale(d,d);var r=mb();l.forEach(function(b){b=b.extent;b[0]<r[0]&&(r[0]=b[0]);b[2]>r[2]&&(r[2]=b[2]);b[1]<r[1]&&(r[1]=b[1]);b[3]>r[3]&&(r[3]=b[3])});var w=ge(Math.round(d*U(r)/e),Math.round(d*qb(r)/e)),u=d/e;l.forEach(function(b){w.drawImage(b.image,m,m,b.image.width-2*m,b.image.height-2*m,(b.extent[0]-r[0])*u,-(b.extent[3]-r[3])*u,U(b.extent)*u,qb(b.extent)*u)});var t=vb(h);k.c.forEach(function(b){var c=
b.source,f=b.target,h=c[1][0],k=c[1][1],u=c[2][0],l=c[2][1];b=(f[0][0]-t[0])/g;var m=-(f[0][1]-t[1])/g,n=(f[1][0]-t[0])/g,z=-(f[1][1]-t[1])/g,D=(f[2][0]-t[0])/g,M=-(f[2][1]-t[1])/g,f=c[0][0],c=c[0][1],h=h-f,k=k-c,u=u-f,l=l-c;a:{h=[[h,k,0,0,n-b],[u,l,0,0,D-b],[0,0,h,k,z-m],[0,0,u,l,M-m]];k=h.length;for(u=0;u<k;u++){for(var l=u,G=Math.abs(h[u][u]),F=u+1;F<k;F++){var W=Math.abs(h[F][u]);W>G&&(G=W,l=F)}if(0===G){h=null;break a}G=h[l];h[l]=h[u];h[u]=G;for(l=u+1;l<k;l++)for(G=-h[l][u]/h[u][u],F=u;F<k+1;F++)h[l][F]=
u==F?0:h[l][F]+G*h[u][F]}u=Array(k);for(l=k-1;0<=l;l--)for(u[l]=h[l][k]/h[l][l],G=l-1;0<=G;G--)h[G][k]-=h[G][l]*u[l];h=u}h&&(p.save(),p.beginPath(),Zg?(u=(b+n+D)/3,l=(m+z+M)/3,k=dh(u,l,b,m),n=dh(u,l,n,z),D=dh(u,l,D,M),p.moveTo(k[0],k[1]),p.lineTo(n[0],n[1]),p.lineTo(D[0],D[1])):(p.moveTo(b,m),p.lineTo(n,z),p.lineTo(D,M)),p.closePath(),p.clip(),p.transform(h[0],h[2],h[1],h[3],b,m),p.translate(r[0]-f,r[3]-c),p.scale(e/d,-e/d),p.drawImage(w.canvas,0,0),p.restore())});n&&(p.save(),p.strokeStyle="black",
p.lineWidth=1,k.c.forEach(function(b){var c=b.target;b=(c[0][0]-t[0])/g;var d=-(c[0][1]-t[1])/g,e=(c[1][0]-t[0])/g,f=-(c[1][1]-t[1])/g,h=(c[2][0]-t[0])/g,c=-(c[2][1]-t[1])/g;p.beginPath();p.moveTo(b,d);p.lineTo(e,f);p.lineTo(h,c);p.closePath();p.stroke()}),p.restore());return p.canvas};function fh(b,c,d,e,f){this.b=b;this.j=c;var g={},h=Qb(this.j,this.b);this.f=function(b){var c=b[0]+"/"+b[1];g[c]||(g[c]=h(b));return g[c]};this.g=e;this.v=f*f;this.c=[];this.h=!1;this.H=this.b.j&&!!e&&!!this.b.a()&&U(e)==U(this.b.a());this.a=this.b.a()?U(this.b.a()):null;this.u=this.j.a()?U(this.j.a()):null;b=vb(d);c=[d[2],d[3]];e=[d[2],d[1]];d=rb(d);f=this.f(b);var k=this.f(c),l=this.f(e),m=this.f(d);gh(this,b,c,e,d,f,k,l,m,10);if(this.h){var n=Infinity;this.c.forEach(function(b){n=Math.min(n,b.source[0][0],
b.source[1][0],b.source[2][0])});this.c.forEach(function(b){if(Math.max(b.source[0][0],b.source[1][0],b.source[2][0])-n>this.a/2){var c=[[b.source[0][0],b.source[0][1]],[b.source[1][0],b.source[1][1]],[b.source[2][0],b.source[2][1]]];c[0][0]-n>this.a/2&&(c[0][0]-=this.a);c[1][0]-n>this.a/2&&(c[1][0]-=this.a);c[2][0]-n>this.a/2&&(c[2][0]-=this.a);Math.max(c[0][0],c[1][0],c[2][0])-Math.min(c[0][0],c[1][0],c[2][0])<this.a/2&&(b.source=c)}},this)}g={}}
function gh(b,c,d,e,f,g,h,k,l,m){var n=lb([g,h,k,l]),p=b.a?U(n)/b.a:null,r=b.b.j&&.5<p&&1>p,w=!1;if(0<m){if(b.j.b&&b.u)var u=lb([c,d,e,f]),w=w|.25<U(u)/b.u;!r&&b.b.b&&p&&(w|=.25<p)}if(w||!b.g||ub(n,b.g)){if(!(w||isFinite(g[0])&&isFinite(g[1])&&isFinite(h[0])&&isFinite(h[1])&&isFinite(k[0])&&isFinite(k[1])&&isFinite(l[0])&&isFinite(l[1])))if(0<m)w=!0;else return;if(0<m&&(w||(p=b.f([(c[0]+e[0])/2,(c[1]+e[1])/2]),n=r?(ya(g[0],b.a)+ya(k[0],b.a))/2-ya(p[0],b.a):(g[0]+k[0])/2-p[0],p=(g[1]+k[1])/2-p[1],
w=n*n+p*p>b.v),w)){Math.abs(c[0]-e[0])<=Math.abs(c[1]-e[1])?(r=[(d[0]+e[0])/2,(d[1]+e[1])/2],n=b.f(r),p=[(f[0]+c[0])/2,(f[1]+c[1])/2],w=b.f(p),gh(b,c,d,r,p,g,h,n,w,m-1),gh(b,p,r,e,f,w,n,k,l,m-1)):(r=[(c[0]+d[0])/2,(c[1]+d[1])/2],n=b.f(r),p=[(e[0]+f[0])/2,(e[1]+f[1])/2],w=b.f(p),gh(b,c,r,p,f,g,n,w,l,m-1),gh(b,r,d,e,p,n,h,k,w,m-1));return}if(r){if(!b.H)return;b.h=!0}b.c.push({source:[g,k,l],target:[c,e,f]});b.c.push({source:[g,h,k],target:[c,d,e]})}}
function hh(b){var c=mb();b.c.forEach(function(b){b=b.source;nb(c,b[0]);nb(c,b[1]);nb(c,b[2])});return c};(function(){var b={mb:{}};(function(){function c(b,d){if(!(this instanceof c))return new c(b,d);this.qa=Math.max(4,b||9);this.Ba=Math.max(2,Math.ceil(.4*this.qa));d&&this.kb(d);this.clear()}function d(b,c){b.bbox=e(b,0,b.children.length,c)}function e(b,c,d,e){for(var g=[Infinity,Infinity,-Infinity,-Infinity],h;c<d;c++)h=b.children[c],f(g,b.F?e(h):h.bbox);return g}function f(b,c){b[0]=Math.min(b[0],c[0]);b[1]=Math.min(b[1],c[1]);b[2]=Math.max(b[2],c[2]);b[3]=Math.max(b[3],c[3])}function g(b,c){return b.bbox[0]-
c.bbox[0]}function h(b,c){return b.bbox[1]-c.bbox[1]}function k(b){return(b[2]-b[0])*(b[3]-b[1])}function l(b){return b[2]-b[0]+(b[3]-b[1])}function m(b,c){return b[0]<=c[0]&&b[1]<=c[1]&&c[2]<=b[2]&&c[3]<=b[3]}function n(b,c){return c[0]<=b[2]&&c[1]<=b[3]&&c[2]>=b[0]&&c[3]>=b[1]}function p(b,c,d,e,f){for(var g=[c,d],h;g.length;)d=g.pop(),c=g.pop(),d-c<=e||(h=c+Math.ceil((d-c)/e/2)*e,r(b,c,d,h,f),g.push(c,h,h,d))}function r(b,c,d,e,f){for(var g,h,k,l,p;d>c;){600<d-c&&(g=d-c+1,h=e-c+1,k=Math.log(g),
l=.5*Math.exp(2*k/3),p=.5*Math.sqrt(k*l*(g-l)/g)*(0>h-g/2?-1:1),k=Math.max(c,Math.floor(e-h*l/g+p)),h=Math.min(d,Math.floor(e+(g-h)*l/g+p)),r(b,k,h,e,f));g=b[e];h=c;l=d;w(b,c,e);for(0<f(b[d],g)&&w(b,c,d);h<l;){w(b,h,l);h++;for(l--;0>f(b[h],g);)h++;for(;0<f(b[l],g);)l--}0===f(b[c],g)?w(b,c,l):(l++,w(b,l,d));l<=e&&(c=l+1);e<=l&&(d=l-1)}}function w(b,c,d){var e=b[c];b[c]=b[d];b[d]=e}c.prototype={all:function(){return this.xa(this.data,[])},search:function(b){var c=this.data,d=[],e=this.M;if(!n(b,c.bbox))return d;
for(var f=[],g,h,k,l;c;){g=0;for(h=c.children.length;g<h;g++)k=c.children[g],l=c.F?e(k):k.bbox,n(b,l)&&(c.F?d.push(k):m(b,l)?this.xa(k,d):f.push(k));c=f.pop()}return d},load:function(b){if(!b||!b.length)return this;if(b.length<this.Ba){for(var c=0,d=b.length;c<d;c++)this.Jb(b[c]);return this}b=this.za(b.slice(),0,b.length-1,0);this.data.children.length?this.data.height===b.height?this.Ca(this.data,b):(this.data.height<b.height&&(c=this.data,this.data=b,b=c),this.Aa(b,this.data.height-b.height-1,!0)):this.data=b;return this},Jb:function(b){b&&this.Aa(b,this.data.height-1);return this},clear:function(){this.data={children:[],height:1,bbox:[Infinity,Infinity,-Infinity,-Infinity],F:!0};return this},remove:function(b){if(!b)return this;for(var c=this.data,d=this.M(b),e=[],f=[],g,h,k,l;c||e.length;){c||(c=e.pop(),h=e[e.length-1],g=f.pop(),l=!0);if(c.F&&(k=c.children.indexOf(b),-1!==k)){c.children.splice(k,1);e.push(c);this.jb(e);break}l||c.F||!m(c.bbox,d)?h?(g++,c=h.children[g],l=!1):c=null:(e.push(c),f.push(g),g=0,h=c,c=c.children[0])}return this},M:function(b){return b},sa:function(b,c){return b[0]-c[0]},ta:function(b,c){return b[1]-c[1]},toJSON:function(){return this.data},xa:function(b,c){for(var d=[];b;)b.F?c.push.apply(c,b.children):d.push.apply(d,b.children),b=d.pop();return c},za:function(b,c,e,f){var g=e-c+1,h=this.qa,k;if(g<=h)return k={children:b.slice(c,e+1),height:1,bbox:null,F:!0},d(k,this.M),k;f||(f=Math.ceil(Math.log(g)/Math.log(h)),h=Math.ceil(g/Math.pow(h,f-1)));k={children:[],
height:f,bbox:null,F:!1};var g=Math.ceil(g/h),h=g*Math.ceil(Math.sqrt(h)),l,m,n;for(p(b,c,e,h,this.sa);c<=e;c+=h)for(m=Math.min(c+h-1,e),p(b,c,m,g,this.ta),l=c;l<=m;l+=g)n=Math.min(l+g-1,m),k.children.push(this.za(b,l,n,f-1));d(k,this.M);return k},ib:function(b,c,d,e){for(var f,g,h,l,p,m,n,r;;){e.push(c);if(c.F||e.length-1===d)break;n=r=Infinity;f=0;for(g=c.children.length;f<g;f++)h=c.children[f],p=k(h.bbox),m=h.bbox,m=(Math.max(m[2],b[2])-Math.min(m[0],b[0]))*(Math.max(m[3],b[3])-Math.min(m[1],b[1]))-
p,m<r?(r=m,n=p<n?p:n,l=h):m===r&&p<n&&(n=p,l=h);c=l||c.children[0]}return c},Aa:function(b,c,d){var e=this.M;d=d?b.bbox:e(b);var e=[],g=this.ib(d,this.data,c,e);g.children.push(b);for(f(g.bbox,d);0<=c;)if(e[c].children.length>this.qa)this.lb(e,c),c--;else break;this.fb(d,e,c)},lb:function(b,c){var e=b[c],f=e.children.length,g=this.Ba;this.gb(e,g,f);f=this.hb(e,g,f);f={children:e.children.splice(f,e.children.length-f),height:e.height,bbox:null,F:!1};e.F&&(f.F=!0);d(e,this.M);d(f,this.M);c?b[c-1].children.push(f):this.Ca(e,f)},Ca:function(b,c){this.data={children:[b,c],height:b.height+1,bbox:null,F:!1};d(this.data,this.M)},hb:function(b,c,d){var f,g,h,l,p,m,n;p=m=Infinity;for(f=c;f<=d-c;f++)g=e(b,0,f,this.M),h=e(b,f,d,this.M),l=Math.max(0,Math.min(g[2],h[2])-Math.max(g[0],h[0]))*Math.max(0,Math.min(g[3],h[3])-Math.max(g[1],h[1])),g=k(g)+k(h),l<p?(p=l,n=f,m=g<m?g:m):l===p&&g<m&&(m=g,n=f);return n},gb:function(b,c,d){var e=b.F?this.sa:g,f=b.F?this.ta:h,k=this.ya(b,c,d,e);c=this.ya(b,c,d,f);k<c&&b.children.sort(e)},ya:function(b,c,d,g){b.children.sort(g);g=this.M;var h=e(b,0,c,g),k=e(b,d-c,d,g),p=l(h)+l(k),m,n;for(m=c;m<d-c;m++)n=b.children[m],f(h,b.F?g(n):n.bbox),p+=l(h);for(m=d-c-1;m>=c;m--)n=b.children[m],f(k,b.F?g(n):n.bbox),p+=l(k);return p},fb:function(b,c,d){for(;0<=d;d--)f(c[d].bbox,b)},jb:function(b){for(var c=b.length-1,e;0<=c;c--)0===b[c].children.length?0<c?(e=b[c-1].children,e.splice(e.indexOf(b[c]),1)):this.clear():d(b[c],this.M)},kb:function(b){var c=["return a"," - b",";"];this.sa=new Function("a","b",c.join(b[0]));this.ta=new Function("a","b",c.join(b[1]));this.M=new Function("a","return [a"+b.join(", a")+"];")}};"undefined"!==typeof b?b.mb=c:"undefined"!==typeof self?self.a=c:window.a=c})()})();function ih(b){Wg.call(this,b);this.i=ge();this.c=null;this.I=mb();this.l=[0,0,0];this.o=Wb()}J(ih,Wg);ih.prototype.a=function(b,c,d){var e=Yg(this,b);Xg(this,"precompose",d,b,e);var f=b.pixelRatio,g=b.viewState,h=g.center,k=g.projection,l=g.resolution,g=g.rotation,m=b.size,n=Math.round(f*m[0]/2),m=Math.round(f*m[1]/2),f=f/l,p=this.b,r=p.X(),w=r.ua(k),u=r.T(k),p=Ta(p,"render"),t=d,A,O,x,B;if(g||p)t=this.i,A=t.canvas,B=Kd(u,l),x=Sd(r,B,k),B=wd(Jd(u,B)),x=x[0]/B[0],l=d.canvas.width*x,O=d.canvas.height*x,B=Math.round(Math.sqrt(l*l+O*O)),A.width!=B?A.width=A.height=B:t.clearRect(0,0,B,B),A=(B-l)/2/x,O=
(B-O)/2/x,f*=x,n=Math.round(x*(n+A)),m=Math.round(x*(m+O));l=t.globalAlpha;t.globalAlpha=c.opacity;var H=this.c,E;c=r.ma(k)&&1==c.opacity;c||(H.reverse(),E=[]);for(var C=0,T=H.length;C<T;++C){var L=H[C],z=L.G,D=Dd(u,z,this.I),M=z[0],G=rb(Dd(u,Ld(u,h,M,this.l))),z=Math.round(U(D)*f),F=Math.round(qb(D)*f),W=Math.round((D[0]-G[0])*f/z)*z+n+Math.round((G[0]-h[0])*f),D=Math.round((G[1]-D[3])*f/F)*F+m+Math.round((h[1]-G[1])*f);if(!c){G=[W,D,W+z,D+F];t.save();for(var Ca=0,va=E.length;Ca<va;++Ca){var Da=
E[Ca];ub(G,Da)&&(t.beginPath(),t.moveTo(G[0],G[1]),t.lineTo(G[0],G[3]),t.lineTo(G[2],G[3]),t.lineTo(G[2],G[1]),t.moveTo(Da[0],Da[1]),t.lineTo(Da[2],Da[1]),t.lineTo(Da[2],Da[3]),t.lineTo(Da[0],Da[3]),t.closePath(),t.clip())}E.push(G)}M=Sd(r,M,k);t.drawImage(L.W(),w,w,M[0],M[1],W,D,z,F);c||t.restore()}p&&(k=A-n/x+n,E=O-m/x+m,h=of(this.o,B/2-k,B/2-E,f,-f,-g,-h[0]+k/f,-h[1]-E/f),Xg(this,"render",t,b,h));(g||p)&&d.drawImage(t.canvas,-Math.round(A),-Math.round(O),B/x,B/x);t.globalAlpha=l;Xg(this,"postcompose",d,b,e)};ih.prototype.h=function(b,c){function d(b){b=b.B();return 2==b||4==b||3==b&&!w}var e=b.pixelRatio,f=b.viewState,g=f.projection,h=this.b,k=h.X(),l=k.T(g),m=Kd(l,f.resolution,0),n=l.s(m),p=f.center;n==f.resolution?(p=vf(p,n,b.size),f=sb(p,n,f.rotation,b.size)):f=b.extent;void 0!==c.extent&&(f=tb(f,c.extent));if(f[2]<f[0]||f[3]<f[1])return!1;n=Gd(l,f,n);p={};p[m]={};var r=rf(k,g,p),w=h.get("useInterimTilesOnError"),u=mb(),t=new oc(0,0,0,0),A,O,x,B;for(x=n.f;x<=n.a;++x)for(B=n.c;B<=n.b;++B)A=xf(k,m,x,B,e,g),!d(A)&&A.a&&(A=A.a),d(A)?p[m][A.G.toString()]=A:(O=Cd(l,A.G,r,t,u),O||(A=Fd(l,A.G,t,u))&&r(m+1,A));r=Object.keys(p).map(Number);r.sort(Za);var u=[],H,t=0;for(x=r.length;t<x;++t)for(H in A=r[t],B=p[A],B)A=B[H],2==A.B()&&u.push(A);this.c=u;uf(b.usedTiles,k,m,n);wf(b,k,l,e,g,f,m,h.get("preload"));sf(b,k);tf(b,k);return!0};function jh(b,c){var d=/\{z\}/g,e=/\{x\}/g,f=/\{y\}/g,g=/\{-y\}/g;return function(h){if(h)return b.replace(d,h[0].toString()).replace(e,h[1].toString()).replace(f,function(){return(-h[2]-1).toString()}).replace(g,function(){var b=c.f?c.f[h[0]]:null;return(b.b-b.c+1+h[2]).toString()})}}function kh(b,c){for(var d=b.length,e=Array(d),f=0;f<d;++f)e[f]=jh(b[f],c);return lh(e)}function lh(b){return 1===b.length?b[0]:function(c,d,e){if(c)return b[ya((c[1]<<c[0])+c[2],b.length)](c,d,e)}}function mh(){};function nh(b){Qd.call(this,{attributions:b.attributions,cacheSize:b.cacheSize,extent:b.extent,logo:b.logo,opaque:b.opaque,projection:b.projection,state:b.state,tileGrid:b.tileGrid,tilePixelRatio:b.tilePixelRatio,wrapX:b.wrapX});this.tileLoadFunction=b.tileLoadFunction;this.tileUrlFunction=this.g?this.g.bind(this):mh;this.urls=null;if(b.urls){var c=b.urls;this.urls=c;var d=c.join("\n");oh(this,this.g?this.g.bind(this):kh(c,this.tileGrid),d)}else b.url&&this.w(b.url);b.tileUrlFunction&&oh(this,b.tileUrlFunction)}
J(nh,Qd);nh.prototype.Y=function(b){b=b.target;switch(b.B()){case 1:R(this,new Ud("tileloadstart",b));break;case 2:R(this,new Ud("tileloadend",b));break;case 3:R(this,new Ud("tileloaderror",b))}};function oh(b,c,d){b.tileUrlFunction=c;"undefined"!==typeof d?b.ga!==d&&(b.ga=d,b.f()):b.f()}
nh.prototype.w=function(b){var c=[],d=/\{(\d)-(\d)\}/.exec(b)||/\{([a-z])-([a-z])\}/.exec(b);if(d){var e=d[2].charCodeAt(0),f;for(f=d[1].charCodeAt(0);f<=e;++f)c.push(b.replace(d[0],String.fromCharCode(f)))}else c.push(b);c=this.urls=c;oh(this,this.g?this.g.bind(this):kh(c,this.tileGrid),b)};nh.prototype.Ua=function(b,c,d){b=this.la(b,c,d);this.a.b.hasOwnProperty(b)&&this.a.get(b)};function ph(b,c){zf.call(this,0,c);this.g=ge();this.a=this.g.canvas;this.a.style.width="100%";this.a.style.height="100%";this.a.className="ol-unselectable";bd(b,this.a,0);this.c=!0;this.v=Wb()}J(ph,zf);ph.prototype.h=function(b){return b instanceof Tg?new ih(b):null};function qh(b,c,d){var e=b.b,f=b.g;if(Ta(e,c)){var g=d.pixelRatio,h=d.viewState,k=h.resolution;of(b.v,b.a.width/2,b.a.height/2,g/k,-g/k,-h.rotation,-h.center[0],-h.center[1]);b=new Vg;R(e,new mf(c,e,b,d,f,null))}}
ph.prototype.u=function(b){if(b){var c=this.g,d=b.pixelRatio,e=Math.round(b.size[0]*d),d=Math.round(b.size[1]*d);this.a.width!=e||this.a.height!=d?(this.a.width=e,this.a.height=d):c.clearRect(0,0,e,d);var f=b.viewState.rotation;Af(b);qh(this,"precompose",b);var g=b.layerStatesArray;bb(g);Ug(c,f,e/2,d/2);var h=b.viewState.resolution,k,l,m,n;k=0;for(l=g.length;k<l;++k)n=g[k],m=n.layer,m=Cf(this,m),n.visible&&h>=n.minResolution&&h<n.maxResolution&&"ready"==n.Sa&&m.h(b,n)&&m.a(b,n,c);Ug(c,-f,e/2,d/2);qh(this,"postcompose",b);this.c||(id(this.a,!0),this.c=!0);Df(this,b);b.postRenderFunctions.push(Bf)}else this.c&&(id(this.a,!1),this.c=!1)};function rh(b,c){qf.call(this,b);this.target=c}J(rh,qf);rh.prototype.h=ja;rh.prototype.o=ja;function sh(b){var c=document.createElement("DIV");c.style.position="absolute";rh.call(this,b,c);this.c=!0;this.i=1;this.g=0;this.a={}}J(sh,rh);sh.prototype.h=function(){for(var b=this.target,c;c=b.firstChild;)b.removeChild(c);this.g=0};sh.prototype.I=function(b,c){if(!c.visible)return this.c&&(id(this.target,!1),this.c=!1),!0;var d=b.pixelRatio,e=b.viewState,f=e.projection,g=this.b,h=g.X(),k=h.T(f),l=h.ua(f),m=Kd(k,e.resolution),n=k.s(m),p=e.center,r;n==e.resolution?(p=vf(p,n,b.size),r=sb(p,n,e.rotation,b.size)):r=b.extent;void 0!==c.extent&&(r=tb(r,c.extent));var n=Gd(k,r,n),w={};w[m]={};var u=rf(h,f,w),t=g.get("useInterimTilesOnError"),A=mb(),O=new oc(0,0,0,0),x,B,H,E;for(H=n.f;H<=n.a;++H)for(E=n.c;E<=n.b;++E)x=xf(h,m,H,E,d,f),B=x.B(),B=2==B||4==B||3==B&&!t,!B&&x.a&&(x=x.a),B=x.B(),2==B?w[m][x.G.toString()]=x:4==B||3==B&&!t||(B=Cd(k,x.G,u,O,A),B||(x=Fd(k,x.G,O,A))&&u(m+1,x));var C;if(this.g!=h.v){for(C in this.a)t=this.a[+C],cd(t.target);this.a={};this.g=h.v}A=Object.keys(w).map(Number);A.sort(Za);var u={},T;H=0;for(E=A.length;H<E;++H){C=A[H];C in this.a?t=this.a[C]:(t=Ld(k,p,C),t=new th(k,t),u[C]=!0,this.a[C]=t);C=w[C];for(T in C){x=t;B=C[T];var L=l,z=B.G,D=z[0],M=z[1],G=z[2],z=z.toString();if(!(z in x.f)){var D=wd(Jd(x.j,D),x.h),F=B.W(x),W=F.style;W.maxWidth="none";var Ca=void 0,va=void 0;0<L?(Ca=document.createElement("DIV"),va=Ca.style,va.overflow="hidden",va.width=D[0]+"px",va.height=D[1]+"px",W.position="absolute",W.left=-L+"px",W.top=-L+"px",W.width=D[0]+2*L+"px",W.height=D[1]+2*L+"px",Ca.appendChild(F)):(W.width=D[0]+"px",W.height=D[1]+"px",Ca=F,va=W);va.position="absolute";va.left=(M-x.b[1])*D[0]+"px";va.top=(x.b[2]-G)*D[1]+"px";x.a||(x.a=document.createDocumentFragment());x.a.appendChild(Ca);x.f[z]=B}}t.a&&(t.target.appendChild(t.a),t.a=null)}l=Object.keys(this.a).map(Number);l.sort(Za);H=Wb();T=0;for(A=l.length;T<A;++T)if(C=l[T],t=this.a[C],C in w)if(x=t.s(),E=t.ea(),of(H,b.size[0]/2,b.size[1]/2,x/e.resolution,x/e.resolution,e.rotation,(E[0]-p[0])/x,(p[1]-E[1])/x),t.setTransform(H),C in u){for(--C;0<=C;--C)if(C in this.a){E=this.a[C].target;E.parentNode&&E.parentNode.insertBefore(t.target,E.nextSibling);break}0>C&&bd(this.target,t.target,0)}else{if(!b.viewHints[0]&&!b.viewHints[1]){B=Ed(t.j,r,t.b[0],
O);C=[];x=E=void 0;for(x in t.f)E=t.f[x],L=E.G,pc(B,L[1],L[2])||C.push(E);L=B=void 0;B=0;for(L=C.length;B<L;++B)E=C[B],x=E.G.toString(),cd(E.W(t)),delete t.f[x]}}else cd(t.target),delete this.a[C];c.opacity!=this.i&&(this.i=this.target.style.opacity=c.opacity);c.visible&&!this.c&&(id(this.target,!0),this.c=!0);uf(b.usedTiles,h,m,n);wf(b,h,k,d,f,r,m,g.get("preload"));sf(b,h);tf(b,h);return!0};function th(b,c){this.target=document.createElement("DIV");this.target.style.position="absolute";this.target.style.width="100%";this.target.style.height="100%";this.j=b;this.b=c;this.g=vb(Dd(b,c));this.u=b.s(c[0]);this.f={};this.a=null;var d=Array(16);Xb(d,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.c=d;this.h=[0,0]}th.prototype.ea=function(){return this.g};th.prototype.s=function(){return this.u};th.prototype.setTransform=function(b){var c=this.c;if(b[0]!=c[0]||b[1]!=c[1]||b[4]!=c[4]||b[5]!=c[5]||b[12]!=c[12]||b[13]!=c[13]){var c=this.target,d;if(ie()){var e=Array(16);for(d=0;16>d;++d)e[d]=b[d].toFixed(6);je(c,"matrix3d("+e.join(",")+")")}else if(he()){var e=[b[0],b[1],b[4],b[5],b[12],b[13]],f=Array(6);for(d=0;6>d;++d)f[d]=e[d].toFixed(6);je(c,"matrix("+f.join(",")+")")}else c.style.left=Math.round(b[12])+"px",c.style.top=Math.round(b[13])+"px";c=this.c;c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];c[4]=b[4];c[5]=b[5];c[6]=b[6];c[7]=b[7];c[8]=b[8];c[9]=b[9];c[10]=b[10];c[11]=b[11];c[12]=b[12];c[13]=b[13];c[14]=b[14];c[15]=b[15]}};function uh(b,c){zf.call(this,0,c);this.g=ge();var d=this.g.canvas;d.style.position="absolute";d.style.width="100%";d.style.height="100%";d.className="ol-unselectable";bd(b,d,0);this.v=Wb();this.a=document.createElement("DIV");this.a.className="ol-unselectable";d=this.a.style;d.position="absolute";d.width="100%";d.height="100%";P(this.a,"touchstart",Ra);bd(b,this.a,0);this.c=!0}J(uh,zf);uh.prototype.C=function(){cd(this.a);uh.L.C.call(this)};uh.prototype.h=function(b){if(b instanceof Tg)b=new sh(b);else return null;return b};function vh(b,c,d){var e=b.b;if(Ta(e,c)){var f=d.pixelRatio,g=d.viewState,h=b.g,k=h.canvas;of(b.v,k.width/2,k.height/2,f/g.resolution,-f/g.resolution,-g.rotation,-g.center[0],-g.center[1]);b=new Vg;R(e,new mf(c,e,b,d,h,null))}}
uh.prototype.u=function(b){if(b){var c=this.b;if(Ta(c,"precompose")||Ta(c,"postcompose")){var c=this.g.canvas,d=b.pixelRatio;c.width=b.size[0]*d;c.height=b.size[1]*d}vh(this,"precompose",b);c=b.layerStatesArray;bb(c);var d=b.viewState.resolution,e,f,g,h;e=0;for(f=c.length;e<f;++e)h=c[e],g=h.layer,g=Cf(this,g),bd(this.a,g.target,e),h.visible&&d>=h.minResolution&&d<h.maxResolution&&"ready"==h.Sa?g.I(b,h)&&g.o(b,h):g.h();var c=b.layerStates,k;for(k in this.f)k in c||(g=this.f[k],cd(g.target));this.c||(id(this.a,!0),this.c=!0);Af(b);Df(this,b);b.postRenderFunctions.push(Bf);vh(this,"postcompose",b)}else this.c&&(id(this.a,!1),this.c=!1)};var wh=["canvas","webgl","dom"];function xh(b){S.call(this);var c=yh(b);this.Ya=void 0!==b.loadTilesWhileAnimating?b.loadTilesWhileAnimating:!1;this.Za=void 0!==b.loadTilesWhileInteracting?b.loadTilesWhileInteracting:!1;this.ab=void 0!==b.pixelRatio?b.pixelRatio:oe;this.$a=c.logos;this.Va=function(){this.g=void 0;this.mc.call(this,Date.now())}.bind(this);this.Wa=Wb();this.cb=Wb();this.Xa=0;this.b=null;this.ia=mb();this.o=this.D=null;this.a=document.createElement("DIV");this.a.className="ol-viewport"+(qe?" ol-touch":"");this.a.style.position="relative";this.a.style.overflow="hidden";this.a.style.width="100%";this.a.style.height="100%";this.a.style.msTouchAction="none";this.a.style.f="none";this.w=document.createElement("DIV");this.w.className="ol-overlaycontainer";this.a.appendChild(this.w);this.l=document.createElement("DIV");this.l.className="ol-overlaycontainer-stopevent";b=["click","dblclick","mousedown","touchstart","mspointerdown",ef,"mousewheel","wheel"];for(var d=0,e=b.length;d<e;++d)P(this.l,b[d],Qa);this.a.appendChild(this.l);this.Y=new Xe(this);for(var f in hf)P(this.Y,hf[f],this.La,this);this.S=c.keyboardEventTarget;this.h=null;P(this.a,"wheel",this.aa,this);P(this.a,"mousewheel",this.aa,this);this.O=c.controls;this.i=c.interactions;this.N=c.overlays;this.Pa={};this.ja=new c.nc(this.a,this);this.J=null;this.A=[];this.Z=[];this.ka=new Hf(this.pb.bind(this),this.Gb.bind(this));this.eb={};P(this,Ya("layergroup"),this.ub,this);P(this,Ya("view"),this.Hb,this);P(this,Ya("size"),this.Db,this);P(this,Ya("target"),this.Fb,this);Wa(this,c.values);wc(this.O,function(b){b.setMap(this)},this);P(this.O,"add",function(b){b.element.setMap(this)},this);P(this.O,"remove",function(b){b.element.setMap(null)},this);wc(this.i,function(b){b.setMap(this)},this);P(this.i,"add",function(b){b.element.setMap(this)},this);P(this.i,"remove",function(b){b.element.setMap(null)},this);wc(this.N,this.Da,this);P(this.N,"add",function(b){this.Da(b.element)},this);P(this.N,"remove",function(b){var c=b.element.ob();void 0!==c&&delete this.Pa[c.toString()];b.element.setMap(null)},this)}J(xh,S);q=xh.prototype;q.Da=function(b){var c=b.ob();void 0!==c&&(this.Pa[c.toString()]=b);b.setMap(this)};q.K=function(b){this.render();Array.prototype.push.apply(this.A,arguments)};q.C=function(){Pa(this.Y);Pa(this.ja);Na(this.a,"wheel",this.aa,this);Na(this.a,"mousewheel",this.aa,this);void 0!==this.c&&(K.removeEventListener("resize",this.c,!1),this.c=void 0);this.g&&(K.cancelAnimationFrame(this.g),this.g=void 0);this.set("target",null);xh.L.C.call(this)};function zh(b){b=b.get("target");return void 0!==b?Wc(b):null}q.da=function(b){var c=this.b;return c?(b=b.slice(),pf(c.pixelToCoordinateMatrix,b,b)):null};function cg(b,c){var d=b.b;if(d){var e=c.slice(0,2);return pf(d.coordinateToPixelMatrix,e,e)}return null}q.pa=function(){return this.get("size")};function Y(b){return b.get("view")}
q.pb=function(b,c,d,e){var f=this.b;if(!(f&&c in f.wantedTiles&&f.wantedTiles[c][b.G.toString()]))return Infinity;b=d[0]-f.focus[0];d=d[1]-f.focus[1];return 65536*Math.log(e)+Math.sqrt(b*b+d*d)/e};q.aa=function(b,c){var d=new Ve(c||b.type,this,b);this.La(d)};q.La=function(b){if(this.b){this.J=b.coordinate;b.frameState=this.b;var c=this.i.a,d;if(!1!==R(this,b))for(d=c.length-1;0<=d;d--){var e=c[d];if(e.get("active")&&!e.handleEvent(b))break}}};
q.Cb=function(){var b=this.b,c=this.ka;if(0!==c.a.length){var d=16,e=d;if(b){var f=b.viewHints;f[0]&&(d=this.Ya?8:0,e=2);f[1]&&(d=this.Za?8:0,e=2)}if(c.j<d){var f=c.H,g=c.a,h=c.f,k=0,l=g.length,m,n,p;for(n=0;n<l;++n)m=g[n],p=f(m),Infinity==p?delete c.b[c.g(m)]:(h[k]=p,g[k++]=m);g.length=k;h.length=k;for(f=(c.a.length>>1)-1;0<=f;f--)Gf(c,f);for(f=0;c.j<d&&f<e&&0<c.a.length;)g=c,k=g.a,l=g.f,h=k[0],1==k.length?(k.length=0,l.length=0):(k[0]=k.pop(),l[0]=l.pop(),Gf(g,0)),k=g.g(h),delete g.b[k],g=h[0],h=g.getKey(),0!==g.B()||h in c.c||(c.c[h]=!0,++c.j,++f,g.load())}}c=this.Z;e=0;for(d=c.length;e<d;++e)c[e](this,b);c.length=0};q.Db=function(){this.render()};q.Fb=function(){var b;this.get("target")&&(b=zh(this));if(this.h){for(var c=0,d=this.h.length;c<d;++c)N(this.h[c]);this.h=null}b?(b.appendChild(this.a),b=this.S?this.S:b,this.h=[P(b,"keydown",this.aa,this),P(b,"keypress",this.aa,this)],this.c||(this.c=this.Ta.bind(this),K.addEventListener("resize",this.c,!1))):(cd(this.a),void 0!==this.c&&(K.removeEventListener("resize",this.c,!1),this.c=void 0));this.Ta()};q.Gb=function(){this.render()};q.Ib=function(){this.render()};q.Hb=function(){this.D&&(N(this.D),this.D=null);var b=Y(this);b&&(this.D=P(b,"propertychange",this.Ib,this));this.render()};q.vb=function(){this.render()};q.wb=function(){this.render()};q.ub=function(){this.o&&(this.o.forEach(N),this.o=null);var b=this.get("layergroup");b&&(this.o=[P(b,"propertychange",this.wb,this),P(b,"change",this.vb,this)]);this.render()};q.render=function(){void 0===this.g&&(this.g=K.requestAnimationFrame(this.Va))};q.mc=function(b){var c,d,e,f=this.pa(),g=Y(this),h=mb(),k=null;if(c=void 0!==f&&0<f[0]&&0<f[1]&&g)c=!!g.P()&&void 0!==g.s();if(c){k=this.b?this.b.viewHints:void 0;void 0!==k?(k[0]=g.c[0],k[1]=g.c[1]):k=g.c.slice();var l=this.get("layergroup").va(),m={};c=0;for(d=l.length;c<d;++c)m[y(l[c].layer)]=l[c];e=g.B();k={animate:!1,attributions:{},coordinateToPixelMatrix:this.Wa,extent:h,focus:this.J?this.J:e.center,index:this.Xa++,layerStates:m,layerStatesArray:l,logos:Ea({},this.$a),pixelRatio:this.ab,pixelToCoordinateMatrix:this.cb,postRenderFunctions:[],size:f,skippedFeatureUids:this.eb,tileQueue:this.ka,time:b,usedTiles:{},viewState:e,viewHints:k,wantedTiles:{}}}if(k){b=this.A;c=f=0;for(d=b.length;c<d;++c)g=b[c],g(this,k)&&(b[f++]=g);b.length=f;k.extent=sb(e.center,e.resolution,e.rotation,k.size,h)}this.b=k;this.ja.u(k);if(k){k.animate&&this.render();Array.prototype.push.apply(this.Z,k.postRenderFunctions);if(h=0===this.A.length&&!k.viewHints[0]&&!k.viewHints[1])h=k.extent,e=this.ia,h=!(h[0]==e[0]&&h[2]==e[2]&&h[1]==e[1]&&h[3]==e[3]);h&&(R(this,new od("moveend",this,k)),h=k.extent,e=this.ia)&&(e[0]=h[0],e[1]=h[1],e[2]=h[2],e[3]=h[3])}R(this,new od("postrender",this,k));h=k=this.Cb;this&&(h=ia(k,this));"function"!=aa(v.setImmediate)||v.Window&&v.Window.prototype&&!X("Edge")&&v.Window.prototype.setImmediate==v.setImmediate?(ae||(ae=be()),ae(h)):v.setImmediate(h)};q.Ta=function(){var b=zh(this);if(b){var c=9==b.nodeType?b:b.ownerDocument||b.document,d=Hc&&b.currentStyle,e;if(e=d)c||ka||(ka=new ed),e=!0;if(e&&"auto"!=d.width&&"auto"!=d.height&&!d.boxSizing)c=jd(b,d.width,"width","pixelWidth"),b=jd(b,d.height,"height","pixelHeight"),b=new Vc(c,b);else{d=new Vc(b.offsetWidth,b.offsetHeight);c=ld(b,"padding");if(!Hc||9<=Number(Tc))e=gd(b,"borderLeftWidth"),f=gd(b,"borderRightWidth"),g=gd(b,"borderTopWidth"),b=gd(b,"borderBottomWidth"),b=new fd(parseFloat(g),parseFloat(f),parseFloat(b),parseFloat(e));else{e=nd(b,"borderLeft");var f=nd(b,"borderRight"),g=nd(b,"borderTop"),b=nd(b,"borderBottom"),b=new fd(g,f,b,e)}b=new Vc(d.width-b.left-c.left-c.right-b.right,d.height-b.top-c.top-c.bottom-b.bottom)}this.set("size",[b.width,b.height])}else this.set("size",void 0)};function yh(b){var c=null;void 0!==b.keyboardEventTarget&&(c="string"===typeof b.keyboardEventTarget?document.getElementById(b.keyboardEventTarget):b.keyboardEventTarget);var d={},e={};if(void 0===b.logo||"boolean"===typeof b.logo&&b.logo)e["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC"]="http://openlayers.org/";else{var f=b.logo;"string"===typeof f?e[f]="":f instanceof HTMLElement?e[y(f).toString()]=f:da(f)&&(e[f.src]=f.href)}f=b.layers instanceof Gg?b.layers:new Gg({layers:b.layers});d.layergroup=f;d.target=b.target;d.view=void 0!==b.view?b.view:new V;var f=zf,g;void 0!==b.renderer?Array.isArray(b.renderer)?g=b.renderer:"string"===typeof b.renderer&&(g=[b.renderer]):g=wh;var h,k;h=0;for(k=g.length;h<k;++h){var l=g[h];if("canvas"==l){if(pe){f=ph;break}}else if("dom"==l){f=uh;break}}var m;void 0!==b.controls?m=Array.isArray(b.controls)?new tc(b.controls.slice()):b.controls:m=$d();var n;void 0!==b.interactions?n=Array.isArray(b.interactions)?new tc(b.interactions.slice()):b.interactions:n=Fg();b=void 0!==b.overlays?Array.isArray(b.overlays)?new tc(b.overlays.slice()):b.overlays:new tc;return{controls:m,interactions:n,keyboardEventTarget:c,logos:e,overlays:b,nc:f,values:d}}Jb(Lg);Jb(Sg);Sg.forEach(function(b){Lg.forEach(function(c){Lb(b,c,Mg);Lb(c,b,Ng)})});function Ah(b){b=b?b:{};this.b=void 0;this.c=Bh;this.i=[];this.w=this.h=0;this.J=null;this.S=!1;this.N=void 0!==b.duration?b.duration:200;var c=void 0!==b.className?b.className:"ol-zoomslider",d=Zc("BUTTON",{type:"button","class":c+"-thumb ol-unselectable"}),c=Zc("DIV",[c,"ol-unselectable","ol-control"],d);this.g=new Pe(c);P(this.g,ze,this.tb,this);P(this.g,Ae,this.Ja,this);P(this.g,Be,this.Ka,this);P(c,"click",this.sb,this);P(d,"click",Qa);pd.call(this,{element:c,render:b.render?b.render:Ch})}
J(Ah,pd);Ah.prototype.C=function(){Pa(this.g);Ah.L.C.call(this)};var Bh=0;q=Ah.prototype;q.setMap=function(b){Ah.L.setMap.call(this,b);b&&b.render()};function Ch(b){if(b.frameState){if(!this.S){var c=this.element,d;if("none"!=(gd(c,"display")||(c.currentStyle?c.currentStyle.display:null)||c.style&&c.style.display))d=hd(c);else{d=c.style;var e=d.display,f=d.visibility,g=d.position;d.visibility="hidden";d.position="absolute";d.display="inline";var h=hd(c);d.display=e;d.position=g;d.visibility=f;d=h}e=c.firstElementChild;c=ld(e,"margin");f=new Vc(e.offsetWidth,e.offsetHeight);e=f.width+c.right+c.left;c=f.height+c.top+c.bottom;this.J=[e,c];d.width>d.height?(this.c=1,this.w=d.width-e):(this.c=Bh,this.h=d.height-c);this.S=!0}b=b.frameState.viewState.resolution;b!==this.b&&(this.b=b,Dh(this,b))}}q.sb=function(b){var c=this.a,d=Y(c),e=d.s();c.K(nc({resolution:e,duration:this.N,easing:ic}));b=wa(1===this.c?(b.offsetX-this.J[0]/2)/this.w:(b.offsetY-this.J[1]/2)/this.h,0,1);b=ec(Y(this.a))(1-b);d.V(d.constrainResolution(b))};
q.tb=function(b){if(!this.l&&b.a.target===this.element.firstElementChild&&(hc(Y(this.a),1),this.A=b.clientX,this.D=b.clientY,this.l=!0,0===this.i.length)){b=this.Ja;var c=this.Ka;this.i.push(P(document,"mousemove",b,this),P(document,"touchmove",b,this),P(document,Ae,b,this),P(document,"mouseup",c,this),P(document,"touchend",c,this),P(document,Be,c,this))}};q.Ja=function(b){if(this.l){var c=this.element.firstElementChild,c=wa(1===this.c?(b.clientX-this.A+parseInt(c.style.left,10))/this.w:(b.clientY-this.D+parseInt(c.style.top,10))/this.h,0,1);this.b=ec(Y(this.a))(1-c);Y(this.a).V(this.b);Dh(this,this.b);this.A=b.clientX;this.D=b.clientY}};q.Ka=function(){if(this.l){var b=this.a,c=Y(b);hc(c,-1);b.K(nc({resolution:this.b,duration:this.N,easing:ic}));b=c.constrainResolution(this.b);c.V(b);this.l=!1;this.D=this.A=void 0;this.i.forEach(N);this.i.length=0}};
function Dh(b,c){var d;d=1-gc(Y(b.a))(c);var e=b.element.firstElementChild;1==b.c?e.style.left=b.w*d+"px":e.style.top=b.h*d+"px"};function Eh(b,c,d,e,f){ud.call(this,b,c);this.g=d;this.f=new Image;null!==e&&(this.f.crossOrigin=e);this.b={};this.c=null;this.h=f}J(Eh,ud);q=Eh.prototype;q.C=function(){1==this.state&&Fh(this);this.a&&Pa(this.a);this.state=5;vd(this);Eh.L.C.call(this)};q.W=function(b){if(void 0!==b){var c=y(b);if(c in this.b)return this.b[c];b=Ga(this.b)?this.f:this.f.cloneNode(!1);return this.b[c]=b}return this.f};q.getKey=function(){return this.g};q.ac=function(){this.state=3;Fh(this);vd(this)};q.bc=function(){this.state=this.f.naturalWidth&&this.f.naturalHeight?2:4;Fh(this);vd(this)};q.load=function(){0==this.state&&(this.state=1,vd(this),this.c=[P(this.f,"error",this.ac,this,!0),P(this.f,"load",this.bc,this,!0)],this.h(this,this.g))};function Fh(b){b.c.forEach(N);b.c=null};function Gh(b,c){function d(){delete K[f];e.parentNode.removeChild(e)}var e=K.document.createElement("script"),f="olc_"+y(c);e.async=!0;e.src=b+(-1==b.indexOf("?")?"?":"&")+"jsonp="+f;var g=K.setTimeout(function(){d()},1E4);K[f]=function(b){K.clearTimeout(g);d();c(b)};K.document.getElementsByTagName("head")[0].appendChild(e)};function Hh(b,c,d,e,f,g,h,k,l,m,n){ud.call(this,f,0);this.w=void 0!==n?n:!1;this.l=h;this.I=k;this.c=null;this.b={};this.g=c;this.v=e;this.i=g?g:f;this.f=[];this.ca=null;this.h=0;g=Dd(e,this.i);k=this.v.a();f=this.g.a();g=k?tb(g,k):g;if(0===pb(g))this.state=4;else if((k=b.a())&&(f?f=tb(f,k):f=k),k=e.s(this.i[0]),n=[(g[0]+g[2])/2,(g[1]+g[3])/2],e=Sb(n,d,b),k=d.getPointResolution(k,n),n=Eb(d),void 0!==n&&(k*=n),n=Eb(b),void 0!==n&&(k/=n),e=b.getPointResolution(k,e)/k,isFinite(e)&&0<e&&(k/=e),e=k,!isFinite(e)||
0>=e)this.state=4;else if(this.o=new fh(b,d,g,f,e*(void 0!==m?m:.5)),0===this.o.c.length)this.state=4;else if(this.h=Kd(c,e),d=hh(this.o),f&&(b.j?(d[1]=wa(d[1],f[1],f[3]),d[3]=wa(d[3],f[1],f[3])):d=tb(d,f)),pb(d))if(b=Ed(c,d,this.h),100>b.na()*(b.b-b.c+1)){for(c=b.f;c<=b.a;c++)for(d=b.c;d<=b.b;d++)(m=l(this.h,c,d,h))&&this.f.push(m);0===this.f.length&&(this.state=4)}else this.state=3;else this.state=4}J(Hh,ud);Hh.prototype.C=function(){1==this.state&&(this.ca.forEach(N),this.ca=null);Hh.L.C.call(this)};Hh.prototype.W=function(b){if(void 0!==b){var c=y(b);if(c in this.b)return this.b[c];b=Ga(this.b)?this.c:this.c.cloneNode(!1);return this.b[c]=b}return this.c};Hh.prototype.Qa=function(){var b=[];this.f.forEach(function(c){c&&2==c.B()&&b.push({extent:Dd(this.g,c.G),image:c.W()})},this);this.f.length=0;if(0===b.length)this.state=3;else{var c=this.i[0],d=Jd(this.v,c),e=ca(d)?d:d[0],d=ca(d)?d:d[1],c=this.v.s(c),f=this.g.s(this.h),g=Dd(this.v,this.i);this.c=eh(e,d,this.l,f,this.g.a(),c,g,this.o,b,this.I,this.w);this.state=2}vd(this)};Hh.prototype.load=function(){if(0==this.state){this.state=1;vd(this);var b=0;this.ca=[];this.f.forEach(function(c){var d=c.B();if(0==d||1==d){b++;var e;e=P(c,"change",function(){var d=c.B();if(2==d||3==d||4==d)N(e),b--,0===b&&(this.ca.forEach(N),this.ca=null,this.Qa())},this);this.ca.push(e)}},this);this.f.forEach(function(b){0==b.B()&&b.load()});0===b&&K.setTimeout(this.Qa.bind(this),0)}};function Ih(b){nh.call(this,{attributions:b.attributions,cacheSize:b.cacheSize,extent:b.extent,logo:b.logo,opaque:b.opaque,projection:b.projection,state:b.state,tileGrid:b.tileGrid,tileLoadFunction:b.tileLoadFunction?b.tileLoadFunction:Jh,tilePixelRatio:b.tilePixelRatio,tileUrlFunction:b.tileUrlFunction,url:b.url,urls:b.urls,wrapX:b.wrapX});this.crossOrigin=void 0!==b.crossOrigin?b.crossOrigin:null;this.tileClass=void 0!==b.tileClass?b.tileClass:Eh;this.c={};this.h={};this.ia=b.reprojectionErrorThreshold}
J(Ih,nh);q=Ih.prototype;q.Na=function(){if(td(this.a))return!0;for(var b in this.c)if(td(this.c[b]))return!0;return!1};q.$=function(b,c){var d=this.fa(b);this.a.$(this.a==d?c:{});for(var e in this.c){var f=this.c[e];f.$(f==d?c:{})}};q.ua=function(){return 0};q.ma=function(b){return this.b&&b&&!Pb(this.b,b)?!1:Ih.L.ma.call(this,b)};q.T=function(b){var c=this.b;return!this.tileGrid||c&&!Pb(c,b)?(c=y(b).toString(),c in this.h||(this.h[c]=Md(b)),this.h[c]):this.tileGrid};q.fa=function(b){var c=this.b;if(!c||Pb(c,b))return this.a;b=y(b).toString();b in this.c||(this.c[b]=new sd);return this.c[b]};function Kh(b,c,d,e,f,g,h){c=[c,d,e];f=(d=Td(b,c,g))?b.tileUrlFunction(d,f,g):void 0;f=new b.tileClass(c,void 0!==f?0:4,void 0!==f?f:"",b.crossOrigin,b.tileLoadFunction);f.key=h;P(f,"change",b.Y,b);return f}
function xf(b,c,d,e,f,g){if(b.b&&g&&!Pb(b.b,g)){f=b.fa(g);d=[c,d,e];c=b.la.apply(b,d);if(f.b.hasOwnProperty(c))return f.get(c);var h=b.b;e=b.T(h);var k=b.T(g),l=Td(b,d,g);b=new Hh(h,e,g,k,d,l,b.A,0,function(b,c,d,e){return Lh(this,b,c,d,e,h)}.bind(b),b.ia,!1);f.set(c,b);return b}return Lh(b,c,d,e,f,g)}
function Lh(b,c,d,e,f,g){var h=null,k=b.la(c,d,e),l=b.getKey();if(b.a.b.hasOwnProperty(k)){if(h=b.a.get(k),h.key!=l){var m=h;h.a&&h.a.key==l?(h=h.a,2==m.B()&&(h.a=m)):(h=Kh(b,c,d,e,f,g,l),2==m.B()?h.a=m:m.a&&2==m.a.B()&&(h.a=m.a,m.a=null));h.a&&(h.a.a=null);b.a.replace(k,h)}}else h=Kh(b,c,d,e,f,g,l),b.a.set(k,h);return h}function Jh(b,c){b.W().src=c};function Mh(b){Ih.call(this,{cacheSize:b.cacheSize,crossOrigin:"anonymous",opaque:b.opaque,projection:Gb("EPSG:3857"),reprojectionErrorThreshold:b.reprojectionErrorThreshold,state:"loading",tileLoadFunction:b.tileLoadFunction,wrapX:void 0!==b.wrapX?b.wrapX:!0});this.O=void 0!==b.culture?b.culture:"en-us";this.i=void 0!==b.maxZoom?b.maxZoom:-1;this.N=b.imagerySet;this.ja=b.version;Gh("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+b.imagerySet+"?uriScheme=https&include=ImageryProviders&key="+
b.key,this.J.bind(this))}J(Mh,Ih);var Nh=new rc({html:""});Mh.prototype.J=function(b){var c={};b&&b.resourceSets&&1<=b.resourceSets.length&&1<=b.resourceSets[0].resources.length&&(c=b.resourceSets[0].resources[0]);c.imageUrlSubdomains||(c.imageUrlSubdomains=["t0","t1","t2","t3"]);c.imageUrl||(c.imageUrl=2===this.N?"https://ecn.{subdomain}.tiles.virtualearth.net/tiles/h{quadkey}.jpeg?g={version}&mkt={culture}":"https://ecn.{subdomain}.tiles.virtualearth.net/tiles/a{quadkey}.jpeg?g={version}");var d=-1==this.i?21:this.i,e=this.ma();b=Nd(this.b);var f=Pd({extent:b,minZoom:1,maxZoom:d,tileSize:[256,256]});this.tileGrid=f;var g=this.O,h=parseInt(this.ja,10)||5E3;this.tileUrlFunction=lh(c.imageUrlSubdomains.map(function(b){var d=[0,0,0],f=c.imageUrl.replace("{subdomain}",b).replace("{version}",h).replace("{culture}",g);return function(b){if(b){rd(b[0],b[1],-b[2]-1,d);b=f;var c;c=d[0];var g=Array(c),h=1<<c-1,k,l;for(k=0;k<c;++k)l=48,d[1]&h&&(l+=1),d[2]&h&&(l+=2),g[k]=String.fromCharCode(l),h>>=1;c=g.join("");e&&(b=b.replace("h{quadkey}","ho"+c));return b.replace("{quadkey}",c)}}}));if(c.imageryProviders){var k=Fb(Gb("EPSG:4326"),this.b);b=c.imageryProviders.map(function(b){var c=b.attribution,e={};b.coverageAreas.forEach(function(b){var c=b.zoomMin,g=Math.min(b.zoomMax,d);b=b.bbox;b=wb([b[1],b[0],b[3],b[2]],k);var h,l;for(h=c;h<=g;++h)l=h.toString(),c=Ed(f,b,h),l in e?e[l].push(c):e[l]=[c]});return new rc({html:c,tileRanges:e})});b.push(Nh);this.o=yd(b);this.f()}this.l="ready";this.f()};function Oh(b){b=b||{};var c=void 0!==b.projection?b.projection:"EPSG:3857",d=void 0!==b.tileGrid?b.tileGrid:Pd({extent:Nd(c),maxZoom:b.maxZoom,minZoom:b.minZoom,tileSize:b.tileSize});Ih.call(this,{attributions:b.attributions,cacheSize:b.cacheSize,crossOrigin:b.crossOrigin,logo:b.logo,opaque:b.opaque,projection:c,reprojectionErrorThreshold:b.reprojectionErrorThreshold,tileGrid:d,tileLoadFunction:b.tileLoadFunction,tilePixelRatio:b.tilePixelRatio,tileUrlFunction:b.tileUrlFunction,url:b.url,urls:b.urls,wrapX:void 0!==b.wrapX?b.wrapX:!0})}J(Oh,Ih);I("ol.animation.pan",lc);I("ol.animation.zoom",nc);I("ol.Attribution",rc);tc.prototype.extend=tc.prototype.$b;I("ol.control.Attribution",Vd);I("ol.control.defaults",$d);I("ol.control.Zoom",Zd);I("ol.control.ZoomSlider",Ah);Eh.prototype.getImage=Eh.prototype.W;I("ol.interaction.defaults",Fg);I("ol.interaction.DoubleClickZoom",Of);I("ol.interaction.KeyboardZoom",tg);I("ol.interaction.MouseWheelZoom",vg);vg.prototype.setMouseAnchor=vg.prototype.l;I("ol.interaction.Pointer",Wf);I("ol.layer.Tile",Tg);Tg.prototype.getSource=Tg.prototype.X;Tg.prototype.setVisible=Tg.prototype.h;I("ol.Map",xh);xh.prototype.beforeRender=xh.prototype.K;xh.prototype.getSize=xh.prototype.pa;xh.prototype.on=xh.prototype.bb;I("ol.proj.fromLonLat",function(b,c){return Sb(b,"EPSG:4326",void 0!==c?c:"EPSG:3857")});I("ol.proj.Projection",Db);I("ol.proj.transform",Sb);I("ol.proj.transformExtent",function(b,c,d){c=Qb(c,d);return wb(b,c)});I("ol.source.BingMaps",Mh);I("ol.source.XYZ",Oh);Oh.prototype.changed=Oh.prototype.f;Oh.prototype.setUrl=Oh.prototype.w;I("ol.View",V);V.prototype.fit=V.prototype.nb;V.prototype.getCenter=V.prototype.P;V.prototype.getResolution=V.prototype.s;V.prototype.getZoom=V.prototype.qb;V.prototype.setCenter=V.prototype.U;V.prototype.setResolution=V.prototype.V;V.prototype.setZoom=V.prototype.oc;})();(function(){var map,view,date,dateURL,resolution=6.698324247899814,projGeodetic='EPSG:4326',projMercator='EPSG:3857',minZoom=screen.availWidth<1000?1:3,maxZoom=20,swapZoom=10,minMODISDate=new Date(2007,0,1),minVIIRSDate=new Date(2015,10,24),mouseWheelInteraction,locating=false,hasBlob=false,showCrosshairs=true,showLabels=false,showDMS=true,showAM=false,duration=350,layers={},ui={},imageCache={},get=document.querySelector.bind(document),getAll=document.querySelectorAll.bind(document),on=document.addEventListener.bind(document);Element.prototype.get=Element.prototype.querySelector;Element.prototype.on=Element.prototype.addEventListener;Element.prototype.show=function(){this.style.display='block';};Element.prototype.hide=function(){this.style.display='none';};Math.easeOut=function(t){return 1-(--t)*t*t*t;};Math.log2=Math.log2||function(n){return Math.log(n)/ Math.LN2;
};window.URL=window.URL||window.webkitURL;function testBlobXHR(){if(!window.XMLHttpRequest){return false;}
var type='blob',http=new XMLHttpRequest();http.open('get','/',true);var hasBlob=false;try{http.responseType=type;hasBlob=('response'in http)&&http.responseType===type;}catch(e){return false;}
return hasBlob;}
function getZoom(){return view.getZoom();}
function decToDMS(e,isLat){var d=Math.abs(e),n=Math.floor(d),l=(d- n)*3600,m=Math.floor(l/60),a=isLat&&0>e?'S':!isLat&&0>e?'W':isLat?'N':'E',z=getZoom(),mult=z>16?100:z>12?10:1;l=Math.round(mult*(l- 60*m))/ mult;
return n+' '+ m+'\' '+ l+'\" '+ a;}
function getLonLat(coords){return ol.proj.transform(coords,projMercator,projGeodetic);}
function getLonLatFromCoords(coords){var ll=getLonLat(coords||view.getCenter()),lon=ll[0]%360,lat=ll[1];if(lon<-180){lon+=360;}
if(lon>180){lon-=360;}
if(lat<-86){lat=-86;}
if(lat>86){lat=86;}
return{lon:Math.round(lon*1e6)/ 1e6,
lat:Math.round(lat*1e6)/ 1e6
};}
function getHash(){var hash=location.hash.split(','),lon=parseFloat(hash[1])%360,lat=parseFloat(hash[0].substring(1));if(isNaN(lon)||isNaN(lat)){lon=0.003204;lat=51.502916;}
if(lon<-180){lon+=360;}
if(lon>180){lon-=360;}
if(lat<-86){lat=-86;}
if(lat>86){lat=86;}
var dh=Date.parse(hash[5]);if(!dh){var initDate=ui.map.getAttribute('data-init-date');if(initDate){d=new Date(initDate);}
if(!initDate||isNaN(d.getFullYear())){d=new Date();d.setDate(d.getDate()- 1);}}else{d=new Date(dh);}
return{ll:[lon,lat],zoom:parseInt(hash[2])||minZoom,labels:hash[3]==='map',am:hash[4]==='am',date:d};}
function updateHash(){var ll=getLonLatFromCoords(),zoom=getZoom(),hash=[];hash[0]=ll.lat||0;hash[1]=ll.lon||0;updateLocation();if(!zoom){zoom=maxZoom- Math.log2(view.getResolution()*resolution);}
hash[2]=Math.round(zoom)+'z';hash[3]=showLabels?'map':'sat';if(zoom<swapZoom){hash[4]=showAM?'am':'pm';hash[5]=dateURL;ui.date.nav.show();}else{ui.date.nav.hide();}
try{history.replaceState(null,null,'#'+ hash.toString());}catch(e){}}
function getNasaSourceURL(){var source='';if(date>=minVIIRSDate){source=showAM?'MODIS_Terra_CorrectedReflectance_TrueColor':'VIIRS_SNPP_CorrectedReflectance_TrueColor';}else{source='MODIS_'+(showAM?'Terra':'Aqua')+'_CorrectedReflectance_TrueColor';}
return'https://map1{a-c}.vis.earthdata.nasa.gov/wmts-webmerc/'+ source+'/default/'+ dateURL+'/GoogleMapsCompatible_Level9/{z}/{y}/{x}.jpg';}
function getNasaSource(){return new ol.source.XYZ({url:getNasaSourceURL(),crossOrigin:'anonymous',attributions:[new ol.Attribution({html:'NASA/GSFC/JPL-Caltech, EOSDIS, MODIS'})],maxZoom:swapZoom- 1,tileLoadFunction:loadNasaTile});}
function updateNasaSource(){layers.nasa.getSource().setUrl(getNasaSourceURL());}
function loadNasaTile(imageTile,src){var source=layers.nasa.getSource(),image=imageTile.getImage();image.onload=function(){source.changed();};if(hasBlob){if(imageCache[src]){image.src=imageCache[src];}else{try{var http=new XMLHttpRequest();http.open('GET',src,true);http.responseType='blob';http.timeout=5000;http.onerror=http.ontimeout=function(){image.src=src;};http.onload=function(){if(this.response){image.src=imageCache[src]=URL.createObjectURL(this.response);}};http.send();}catch(e){image.src=src;}}}else{image.src=src;}}
function getLocale(){if(navigator.languages&&navigator.languages.length>0){return navigator.languages[0]||'en-US';}
return navigator.language||'en-US';}
function getBingSource(labels,opaque){return new ol.source.BingMaps({key:ui.map.getAttribute('data-key'),imagerySet:labels?2:1,opaque:opaque,version:ui.map.getAttribute('data-ver'),maxZoom:maxZoom- 1,culture:getLocale().toLowerCase()});}
function onLocatedUser(position){var lon=position.coords.longitude,lat=position.coords.latitude;view.setCenter(ol.proj.fromLonLat([lon,lat]));view.setZoom(maxZoom- 2);ui.controls.locate.classList.remove('locating');locating=false;ga('send','event','Locate',lat.toFixed(6)+','+ lon.toFixed(6));}
function locateUser(){if(!locating&&navigator.geolocation){locating=true;ui.controls.locate.classList.add('locating');navigator.geolocation.getCurrentPosition(onLocatedUser);}}
function toggleCrosshairs(){showCrosshairs=!showCrosshairs;mouseWheelInteraction.setMouseAnchor(!showCrosshairs);if(showCrosshairs){ui.crosshairs.show();ui.controls.crosshairs.classList.remove('off');ui.map.classList.remove('crosshairs');}else{ui.crosshairs.hide();ui.controls.crosshairs.classList.add('off');ui.map.classList.add('crosshairs');}
updateLocation();}
function updateLabels(){if(showLabels){layers.bingMap.setVisible(true);layers.bingHyb.setVisible(true);layers.bingSat.setVisible(false);ui.controls.labels.classList.remove('off');}else{layers.bingMap.setVisible(false);layers.bingHyb.setVisible(false);layers.bingSat.setVisible(true);ui.controls.labels.classList.add('off');}}
function toggleLabels(){showLabels=!showLabels;updateLabels();updateHash();}
function exitFullScreen(){if(document.exitFullscreen){document.exitFullscreen();}
else if(document.exitFullScreen){document.exitFullScreen();}
else if(document.webkitExitFullscreen){document.webkitExitFullscreen();}
else if(document.webkitCancelFullScreen){document.webkitCancelFullScreen();}
else if(document.mozExitFullScreen){document.mozExitFullScreen();}
else if(document.mozCancelFullScreen){document.mozCancelFullScreen();}}
function enterFullScreen(){var el=document.body;if(el.requestFullscreen){el.requestFullscreen();}
else if(el.requestFullScreen){el.requestFullScreen();}
else if(el.webkitRequestFullScreen){el.webkitRequestFullScreen();}
else if(el.mozRequestFullScreenWithKeys){el.mozRequestFullScreenWithKeys();}
else if(el.mozRequestFullScreen){el.mozRequestFullScreen();}}
function isFullScreenEnabled(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled;}
function isFullScreen(){return!!(document.fullscreenElement||document.fullScreenElement||document.webkitFullscreenElement||document.webkitIsFullScreen||document.mozFullScreenElement||document.mozFullScreen||document.fullScreen);}
function toggleFullScreen(){if(isFullScreen()){exitFullScreen();}else{enterFullScreen();}}
function fullScreenChange(event){var el=document.body;if(isFullScreen()){el.classList.add('fs');ui.controls.fullscreen.classList.remove('off');}else{el.classList.remove('fs');ui.controls.fullscreen.classList.add('off');}}
function updateLocation(event){var ll=getLonLatFromCoords(!showCrosshairs&&event&&event.coordinate);if(showDMS){ui.lon.innerHTML=decToDMS(ll.lon,false);ui.lat.innerHTML=decToDMS(ll.lat,true);}else{ui.lon.innerHTML=ll.lon.toFixed(6);ui.lat.innerHTML=ll.lat.toFixed(6);}}
function toggleLocation(){showDMS=!showDMS;updateLocation();}
Date.months=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];Date.prototype.getMonthName=function(){if(this.toLocaleString){var name=this.toLocaleDateString(getLocale(),{month:'short'});if(name.length<7){return name;}}
return Date.months[this.getMonth()];};function updateDateUI(){ui.date.year.innerHTML=date.getFullYear();ui.date.month.innerHTML=date.getMonthName();ui.date.day.innerHTML=date.getDate();ui.date.am.innerHTML=showAM?'AM':'PM';}
function setDate(newDate){if(newDate>=minMODISDate&&newDate<=new Date()){date=newDate;updateDateUI();dateURL=date.toJSON().slice(0,10);return true;}
return false;}
function setDateYear(dy){var newDate=new Date(date);newDate.setFullYear(newDate.getFullYear()+ dy);if(setDate(newDate)){updateNasaSource();updateHash();}}
function setDateMonth(dm){var newDate=new Date(date);newDate.setMonth(newDate.getMonth()+ dm);if(setDate(newDate)){updateNasaSource();updateHash();}}
function setDateDay(dd){var newDate=new Date(date);newDate.setDate(newDate.getDate()+ dd);if(setDate(newDate)){updateNasaSource();updateHash();}}
function setDateAM(da){var newDate=new Date(date);showAM=!showAM;if(!showAM&&da<0){setDateDay(da);}else if(showAM&&da>0){setDateDay(da);}else{updateNasaSource();updateHash();updateDateUI();}}
function initUI(){ui={main:get('main'),map:get('#map'),crosshairs:get('.map.crosshairs'),controls:{locate:get('.controls .locate'),crosshairs:get('.controls .crosshairs'),labels:get('.controls .labels'),fullscreen:get('.controls .fullscreen')},location:get('.location'),lat:get('.lat'),lon:get('.lon'),search:get('.search'),date:{nav:get('.date'),year:get('.date .year div'),yearUp:get('.date .year .up'),yearDown:get('.date .year .down'),month:get('.date .month div'),monthUp:get('.date .month .up'),monthDown:get('.date .month .down'),day:get('.date .day div'),dayUp:get('.date .day .up'),dayDown:get('.date .day .down'),am:get('.date .am div'),amUp:get('.date .am .up'),amDown:get('.date .am .down')}};document.createElement('header');document.createElement('main');document.createElement('nav');}
function initMap(){var hash=getHash(),extent=6378137*Math.PI,swapResolution=Math.pow(2,swapZoom+ 1)/ resolution;
hasBlob=URL&&URL.createObjectURL&&testBlobXHR();view=new ol.View({center:ol.proj.fromLonLat(hash.ll),zoom:hash.zoom,extent:[Number.NEGATIVE_INFINITY,-extent,Number.POSITIVE_INFINITY,extent],minZoom:minZoom,maxZoom:maxZoom});showAM=hash.am;setDate(hash.date);try{layers={nasa:new ol.layer.Tile({source:getNasaSource(),minResolution:swapResolution}),bingMap:new ol.layer.Tile({source:getBingSource(true,true),minResolution:swapResolution}),bingHyb:new ol.layer.Tile({source:getBingSource(true,false),maxResolution:swapResolution}),bingSat:new ol.layer.Tile({source:getBingSource(false,false),maxResolution:swapResolution})};}catch(e){alert(e);}
showLabels=hash.labels;updateLabels();mouseWheelInteraction=new ol.interaction.MouseWheelZoom({useAnchor:!showCrosshairs});map=new ol.Map({view:view,target:'map',layers:[layers.nasa,layers.bingMap,layers.bingHyb,layers.bingSat],controls:ol.control.defaults({attribution:false,rotate:false,zoom:false}).extend([new ol.control.Attribution({collapsible:false,collapsed:false}),new ol.control.Zoom({duration:duration}),new ol.control.ZoomSlider({duration:duration*2})]),interactions:ol.interaction.defaults({altShiftDragRotate:false,pinchRotate:false,shiftDragZoom:false,zoomDuration:duration}).extend([new ol.interaction.DoubleClickZoom({duration:duration}),new ol.interaction.KeyboardZoom({duration:duration}),mouseWheelInteraction]),keyboardEventTarget:document,loadTilesWhileInteracting:true,loadTilesWhileAnimating:true});}
function initEvents(){map.on('dblclick',function(event){if(!showCrosshairs){return;}
event.preventDefault();var pan=ol.animation.pan({duration:duration,easing:Math.easeOut,source:view.getCenter()});map.beforeRender(pan);if(getZoom()<maxZoom){var zoom=ol.animation.zoom({duration:duration,easing:Math.easeOut,resolution:view.getResolution()});map.beforeRender(zoom);view.setResolution(view.getResolution()*0.5);}
view.setCenter(ol.proj.fromLonLat(getLonLat(event.coordinate)));});map.on('keydown',function(event){if(event.originalEvent.target.name==='q'){return;}
if(event.originalEvent.key==='='&&event.originalEvent.location===0&&getZoom()<maxZoom){var zoom=ol.animation.zoom({duration:duration,easing:Math.easeOut,resolution:view.getResolution()});map.beforeRender(zoom);view.setResolution(view.getResolution()*0.5);}});map.on('moveend',updateHash);map.on('pointermove',updateLocation);ui.controls.locate.on('click',locateUser);ui.controls.crosshairs.on('click',toggleCrosshairs);ui.controls.labels.on('click',toggleLabels);if(isFullScreenEnabled()){ui.controls.fullscreen.on('click',toggleFullScreen);on('webkitfullscreenchange',fullScreenChange);on('mozfullscreenchange',fullScreenChange);on('fullscreenchange',fullScreenChange);}else{ui.controls.fullscreen.hide();}
if(!navigator.geolocation){ui.controls.locate.classList.add('off');}
ui.location.on('click',toggleLocation);ui.search.onsubmit=function(event){event.preventDefault();var query=this.q.value;this.classList.remove('error');if(query&&query.length>1&&window.JSON){var http=new XMLHttpRequest();http.open('POST','/geo/',true);http.setRequestHeader('Content-Type','application/x-www-form-urlencoded');http.onload=function(){var data,error;try{data=JSON.parse(this.responseText);}catch(e){error=e;}
if(data&&data.success){view.setCenter(ol.proj.fromLonLat([data.lon,data.lat]));if(data.box&&data.box.length===4){view.fit(ol.proj.transformExtent(data.box,projGeodetic,projMercator),map.getSize());}}else{ui.search.classList.add('error');ui.search.get('input').select();ga('send','event','Error',error||data&&data.error,query);}};http.send('q='+ query);ga('send','event','Search',query);}else{this.classList.add('error');this.get('input').select();}};ui.date.yearUp.on('click',function(){setDateYear(-1);});ui.date.yearDown.on('click',function(){setDateYear(1);});ui.date.monthUp.on('click',function(){setDateMonth(-1);});ui.date.monthDown.on('click',function(){setDateMonth(1);});ui.date.dayUp.on('click',function(){setDateDay(-1);});ui.date.dayDown.on('click',function(){setDateDay(1);});ui.date.amUp.on('click',function(){setDateAM(-1);});ui.date.amDown.on('click',function(){setDateAM(1);});window.onhashchange=function(){var hash=getHash();view.setCenter(ol.proj.fromLonLat(hash.ll));view.setZoom(hash.zoom);showLabels=hash.labels;updateLabels();if(showAM!==hash.am||setDate(hash.date)){showAM=hash.am;updateNasaSource();}};window.onerror=function(message,file,line){if(message&&!(/Script error|DealPly/.test(message))){ga('send','event','Error',message,file&&line?('['+ file+':'+ line+']'):'',true);}
return false;};}
function checkAdBlock(){if(getAll('.ad ins').length<2){getAll('.ad')[0].innerHTML='<a href="https://neave.com/" target="_top" class="neave-link">Neave Interactive</a>';}}
on('DOMContentLoaded',function(){initUI();initMap();initEvents();setTimeout(checkAdBlock,2000);});}());